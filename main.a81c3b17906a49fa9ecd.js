!function(){"use strict";const t=document.querySelector(".profile"),e=t.querySelector(".button-edit"),s=t.querySelector(".button-add"),i=t.querySelector(".profile__avatar-hover"),r={};class n{constructor(t,e,s,i,r,n,o){this._name=t.name,this._link=t.link,this._id=t._id,this._likes=t.likes,this._ownerId=t.owner._id,this._cardSelector=e,this._handleCardClick=s,this._deleteLikes=i,this._putLikes=r,this._popupDelete=n,this._myId=o()._id,this._myName=o().name}createCard(){this._newCard=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._buttonDelete=this._newCard.querySelector(".button-delete"),this._ownerId!==this._myId&&this._buttonDelete.classList.add("button-delete_inactive"),this.titleCard=this._newCard.querySelector(".card__title"),this.buttonLike=this._newCard.querySelector(".button-like"),this.photoLinkCard=this._newCard.querySelector(".card__photo"),this.cardCountLike=this._newCard.querySelector(".card__count-like");for(let t=0;t<this._likes.length;t++)if(this._likes[t].name===this._myName){this._setClassLike();break}return this._setEventListeners(),this.titleCard.textContent=this._name,this.photoLinkCard.src=this._link,this.photoLinkCard.alt=this._name,this.cardCountLike.textContent=this._likes.length,this._newCard}_setEventListeners(){this._newCard.querySelector(".button-like").addEventListener("click",(()=>{this.buttonLike.classList.contains("button-like_active")?this._removeLike():this._addLike()})),this._buttonDelete.classList.contains("button-delete_inactive")||this._buttonDelete.addEventListener("click",(()=>{this._popupDelete(this._deleteCard.bind(this),this._id)})),this.photoLinkCard.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_addLike(){this._putLikes(this._id).then((t=>{this._setClassLike(),this.cardCountLike.textContent=t.likes.length})).catch((t=>console.error(t)))}_removeLike(){this._deleteLikes(this._id).then((t=>{this._setClassLike(),this.cardCountLike.textContent=t.likes.length})).catch((t=>console.error(t)))}_setClassLike(){this.buttonLike.classList.toggle("button-like_active")}_deleteCard(){this._deleteDomCard(),this._newCard=null}_deleteDomCard(){this._newCard.remove()}}class o{constructor(t,e){this._config=t,this._form=e,this._inputList=Array.from(this._form.querySelectorAll("".concat(this._config.inputSelector))),this._buttonElement=this._form.querySelector("".concat(this._config.submitButtonSelector))}enableValidation(){this._setEventListeners()}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_showInputError(t,e){const s=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.add(this._config.inputErrorClass),s.textContent=e,s.classList.add("".concat(this._config.errorClass,"_active"))}_hideInputError(t){const e=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.remove(this._config.inputErrorClass),e.classList.remove("".concat(this._config.errorClass,"_active")),e.textContent=""}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}}class a{constructor(t){this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".button-close"),this._handleEscClosebind=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClosebind)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClosebind)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._buttonClose.addEventListener("click",this.close.bind(this)),this._popup.addEventListener("mousedown",(t=>{t.target===t.currentTarget&&this.close()}))}}class h extends a{constructor(t,e){super(t),this.handleFormSubmit=e,this._buttonSubmit=this._popup.querySelector(".button-submit"),this._inputList=this._popup.querySelectorAll(".input"),this.setEventListeners()}_getInputValues(){return this.formValues={},this._inputList.forEach((t=>{this.formValues[t.name]=t.value})),this.formValues}setEventListeners(){this._form=this._popup.querySelector(".popup__container"),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this._getInputValues(),this._buttonSubmit)})),super.setEventListeners()}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}close(){this._form.reset(),super.close()}}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const l=new class{constructor(t){let{baseURL:e,headers:s}=t;c(this,"postCard",(t=>fetch(this._urlCard,{method:"POST",headers:this._headers,body:JSON.stringify(t)}).then((t=>this._getResponseData(t))))),c(this,"deleteCard",(t=>fetch("".concat(this._urlCard).concat(t),{method:"DELETE",headers:this._headers}).then((t=>this._getResponseData(t))))),c(this,"putLikes",(t=>fetch("".concat(this._urlCard).concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((t=>this._getResponseData(t))))),c(this,"deleteLikes",(t=>fetch("".concat(this._urlCard).concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((t=>this._getResponseData(t))))),this._baseURL=e,this._urlDataProfile="".concat(this._baseURL,"users/me/"),this._urlCard="".concat(this._baseURL,"cards/"),this._urlAvatar="".concat(this._baseURL,"users/me/avatar/"),this._headers=s}getDataProfile(){return fetch(this._urlDataProfile,{headers:this._headers}).then((t=>this._getResponseData(t)))}getDataCard(){return fetch(this._urlCard,{headers:this._headers}).then((t=>this._getResponseData(t)))}sendDataProfile(t){return fetch(this._urlDataProfile,{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then((t=>this._getResponseData(t)))}sendDataAvatar(t){return fetch(this._urlAvatar,{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then((t=>this._getResponseData(t)))}_getResponseData(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status,"  ").concat(t.statusText))}}({baseURL:"https://nomoreparties.co/v1/cohort-46/",headers:{authorization:"13749ec2-245f-4fcd-8f22-451e84bec66b","Content-Type":"application/json"}}),u=new class{constructor(t,e){let{renderer:s}=t;this._renderer=s,this._container=document.querySelector(e)}addItem(t){this._container.append(t)}prependItem(t){this._container.prepend(t)}clear(){this._container.innerHTML=""}renderItems(t){this.clear(),this._renderedItems=t,this._renderedItems.forEach((t=>{this._renderer(t)}))}}({renderer:t=>{const e=C(t);u.addItem(e)}},".cards"),_=new h(".popup_form_edit",(function(t,e){v(!0,e),l.sendDataProfile(t).then((t=>{b.setUserInfo(t.name,t.about),_.close()})).catch((t=>console.error(t))),v(!1,e)})),d=new h(".popup_form_add",(function(t,e){v(!0,e),l.postCard(t).then((t=>{const e=C(t);u.prependItem(e),d.close()})).catch((t=>console.error(t))),v(!1,e)})),p=new class extends a{constructor(t){super(t),this._popupBigPhoto=this._popup.querySelector(".popup__bigPhoto"),this._popupPhotoSubtitle=this._popup.querySelector(".popup__subtitle")}open(t,e){this._popupBigPhoto.alt=t,this._popupBigPhoto.src=e,this._popupPhotoSubtitle.textContent=t,super.open()}}(".popup_photo"),m=new class extends a{constructor(t,e){super(t),this.handleFormSubmit=e,this._setEventListeners()}_setEventListeners(){this._form=this._popup.querySelector(".popup__container"),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this.deleteCard,this.id)})),super.setEventListeners()}open(t,e){super.open(),this.deleteCard=t,this.id=e}}(".popup_form_delete",(function(t,e){l.deleteCard(e).then((()=>{t(),m.close()})).catch((t=>console.error(t)))})),f=new h(".popup_form_updateAvatar",(function(t,e){v(!0,e),l.sendDataAvatar(t).then((t=>{b.setUserAvatar(t.avatar),f.close()})).catch((t=>console.error(t))),v(!1,e)})),b=new class{constructor(t,e,s){var i,r;r=()=>this._userInformation,(i="getFullPackInfoObj")in this?Object.defineProperty(this,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[i]=r,this._profileName=document.querySelector(t),this._profileStatus=document.querySelector(e),this._profileAvatar=document.querySelector(s)}getUserInfo(){return this._name=this._profileName.textContent,this._about=this._profileStatus.textContent,this.info={name:this._name,about:this._about},this.info}saveServerInformation(t){this._userInformation=t}setUserInfo(t,e){this._profileName.textContent=t,this._profileStatus.textContent=e}setUserAvatar(t){this._profileAvatar.src=t}}(".profile__name",".profile__status",".profile__avatar");function C(t){return new n(t,".template__card",L,l.deleteLikes,l.putLikes,m.open.bind(m),b.getFullPackInfoObj).createCard()}function L(t,e){p.open(t,e)}function v(t,e){e.textContent=t?"Cохранение...":"Cохранить"}var k;p.setEventListeners(),k={form:".popup__container",inputSelector:".input",submitButtonSelector:".button-submit",inactiveButtonClass:"button_invalid",inputErrorClass:"input_type_error",errorClass:"input-error"},Array.from(document.querySelectorAll(k.form)).forEach((t=>{const e=new o(k,t),s=t.getAttribute("name");r[s]=e,e.enableValidation()})),Promise.all([l.getDataProfile(),l.getDataCard()]).then((t=>{let[e,s]=t;b.saveServerInformation(e),b.setUserInfo(e.name,e.about),b.setUserAvatar(e.avatar),u.renderItems(s)})),e.addEventListener("click",(function(){_.open(),_.setInputValues(b.getUserInfo())})),s.addEventListener("click",(function(){r.formCard.resetValidation(),d.open()})),i.addEventListener("click",(function(){f.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5hODFjM2IxNzkwNmE0OWZhOWVjZC5qcyIsIm1hcHBpbmdzIjoieUJBQUEsTUFBTUEsRUFBVUMsU0FBU0MsY0FBYyxZQUNqQ0MsRUFBYUgsRUFBUUUsY0FBYyxnQkFDbkNFLEVBQVlKLEVBQVFFLGNBQWMsZUFDbENHLEVBQVNMLEVBQVFFLGNBQWMsMEJBZ0IvQkksRUFBaUIsR0NuQlIsTUFBTUMsRUFDakJDLFlBQVlDLEVBQUtDLEVBQWNDLEVBQWlCQyxFQUFhQyxFQUFVQyxFQUFhQyxHQUNoRkMsS0FBS0MsTUFBUVIsRUFBSVMsS0FDakJGLEtBQUtHLE1BQVFWLEVBQUlXLEtBQ2pCSixLQUFLSyxJQUFNWixFQUFJWSxJQUNmTCxLQUFLTSxPQUFTYixFQUFJYyxNQUNsQlAsS0FBS1EsU0FBV2YsRUFBSWdCLE1BQU1KLElBQzFCTCxLQUFLVSxjQUFnQmhCLEVBQ3JCTSxLQUFLVyxpQkFBbUJoQixFQUN4QkssS0FBS1ksYUFBZWhCLEVBQ3BCSSxLQUFLYSxVQUFZaEIsRUFDakJHLEtBQUtjLGFBQWVoQixFQUNwQkUsS0FBS2UsTUFBUWhCLElBQWtCTSxJQUMvQkwsS0FBS2dCLFFBQVVqQixJQUFrQkcsS0FHckNlLGFBQ0lqQixLQUFLa0IsU0FBV2pDLFNBQ1hDLGNBQWNjLEtBQUtVLGVBQ25CUyxRQUNBakMsY0FBYyxTQUNka0MsV0FBVSxHQUdmcEIsS0FBS3FCLGNBQWdCckIsS0FBS2tCLFNBQVNoQyxjQUFjLGtCQUc3Q2MsS0FBS1EsV0FBYVIsS0FBS2UsT0FDdkJmLEtBQUtxQixjQUFjQyxVQUFVQyxJQUFJLDBCQUdyQ3ZCLEtBQUt3QixVQUFZeEIsS0FBS2tCLFNBQVNoQyxjQUFjLGdCQUM3Q2MsS0FBS3lCLFdBQWF6QixLQUFLa0IsU0FBU2hDLGNBQWMsZ0JBQzlDYyxLQUFLMEIsY0FBZ0IxQixLQUFLa0IsU0FBU2hDLGNBQWMsZ0JBQ2pEYyxLQUFLMkIsY0FBZ0IzQixLQUFLa0IsU0FBU2hDLGNBQWMscUJBRWpELElBQUssSUFBSTBDLEVBQUksRUFBR0EsRUFBSTVCLEtBQUtNLE9BQU91QixPQUFRRCxJQUNwQyxHQUFJNUIsS0FBS00sT0FBT3NCLEdBQUcxQixPQUFTRixLQUFLZ0IsUUFBUyxDQUN0Q2hCLEtBQUs4QixnQkFDTCxNQVdSLE9BUEE5QixLQUFLK0IscUJBRUwvQixLQUFLd0IsVUFBVVEsWUFBY2hDLEtBQUtDLE1BQ2xDRCxLQUFLMEIsY0FBY08sSUFBTWpDLEtBQUtHLE1BQzlCSCxLQUFLMEIsY0FBY1EsSUFBTWxDLEtBQUtDLE1BQzlCRCxLQUFLMkIsY0FBY0ssWUFBY2hDLEtBQUtNLE9BQU91QixPQUV0QzdCLEtBQUtrQixTQUloQmEscUJBQ0kvQixLQUFLa0IsU0FBU2hDLGNBQWMsZ0JBQWdCaUQsaUJBQWlCLFNBQVMsS0FDN0RuQyxLQUFLeUIsV0FBV0gsVUFBVWMsU0FBUyxzQkFHcENwQyxLQUFLcUMsY0FGTHJDLEtBQUtzQyxjQU1SdEMsS0FBS3FCLGNBQWNDLFVBQVVjLFNBQVMsMkJBQ3ZDcEMsS0FBS3FCLGNBQWNjLGlCQUFpQixTQUFTLEtBQVFuQyxLQUFLYyxhQUFhZCxLQUFLdUMsWUFBWUMsS0FBS3hDLE1BQU9BLEtBQUtLLFFBRzdHTCxLQUFLMEIsY0FBY1MsaUJBQWlCLFNBQVMsS0FDekNuQyxLQUFLVyxpQkFBaUJYLEtBQUtDLE1BQU9ELEtBQUtHLFVBSS9DbUMsV0FDSXRDLEtBQUthLFVBQVViLEtBQUtLLEtBQUtvQyxNQUFNQyxJQUMzQjFDLEtBQUs4QixnQkFDTDlCLEtBQUsyQixjQUFjSyxZQUFjVSxFQUFFbkMsTUFBTXNCLFVBQzFDYyxPQUFNQyxHQUFLQyxRQUFRQyxNQUFNRixLQUdoQ1AsY0FDSXJDLEtBQUtZLGFBQWFaLEtBQUtLLEtBQUtvQyxNQUFNQyxJQUM5QjFDLEtBQUs4QixnQkFDTDlCLEtBQUsyQixjQUFjSyxZQUFjVSxFQUFFbkMsTUFBTXNCLFVBQzFDYyxPQUFNQyxHQUFLQyxRQUFRQyxNQUFNRixLQUdoQ2QsZ0JBQ0k5QixLQUFLeUIsV0FBV0gsVUFBVXlCLE9BQU8sc0JBR3JDUixjQUNJdkMsS0FBS2dELGlCQUNMaEQsS0FBS2tCLFNBQVcsS0FHcEI4QixpQkFDSWhELEtBQUtrQixTQUFTK0IsVUNoR1AsTUFBTUMsRUFDakIxRCxZQUFZMkQsRUFBUUMsR0FDaEJwRCxLQUFLcUQsUUFBVUYsRUFDZm5ELEtBQUtzRCxNQUFRRixFQUNicEQsS0FBS3VELFdBQWFDLE1BQU1DLEtBQUt6RCxLQUFLc0QsTUFBTUksaUJBQVgsVUFBK0IxRCxLQUFLcUQsUUFBUU0saUJBQ3pFM0QsS0FBSzRELGVBQWlCNUQsS0FBS3NELE1BQU1wRSxjQUFYLFVBQTRCYyxLQUFLcUQsUUFBUVEsdUJBSW5FQyxtQkFDSTlELEtBQUsrQixxQkFHVEEscUJBRUkvQixLQUFLK0QscUJBRUwvRCxLQUFLdUQsV0FBV1MsU0FBU0MsSUFDckJBLEVBQWE5QixpQkFBaUIsU0FBUyxLQUNuQ25DLEtBQUtrRSxvQkFBb0JELEdBRXpCakUsS0FBSytELDJCQU1qQkEscUJBQ1EvRCxLQUFLbUUsb0JBQ0xuRSxLQUFLNEQsZUFBZXRDLFVBQVVDLElBQUl2QixLQUFLcUQsUUFBUWUscUJBQy9DcEUsS0FBSzRELGVBQWVTLFVBQVcsSUFFL0JyRSxLQUFLNEQsZUFBZXRDLFVBQVUyQixPQUFPakQsS0FBS3FELFFBQVFlLHFCQUNsRHBFLEtBQUs0RCxlQUFlUyxVQUFXLEdBSXZDRixtQkFDSSxPQUFPbkUsS0FBS3VELFdBQVdlLE1BQU1MLElBQ2pCQSxFQUFhTSxTQUFTQyxRQUl0Q04sb0JBQW9CRCxHQUNYQSxFQUFhTSxTQUFTQyxNQUd2QnhFLEtBQUt5RSxnQkFBZ0JSLEdBRnJCakUsS0FBSzBFLGdCQUFnQlQsRUFBY0EsRUFBYVUsbUJBTXhERCxnQkFBZ0JULEVBQWNXLEdBQzFCLE1BQU1DLEVBQWU3RSxLQUFLc0QsTUFBTXBFLGNBQVgsV0FBNkJjLEtBQUtxRCxRQUFReUIsV0FBMUMsWUFBd0RiLEVBQWFjLEtBQzFGZCxFQUFhM0MsVUFBVUMsSUFBSXZCLEtBQUtxRCxRQUFRMkIsaUJBQ3hDSCxFQUFhN0MsWUFBYzRDLEVBQzNCQyxFQUFhdkQsVUFBVUMsSUFBdkIsVUFBOEJ2QixLQUFLcUQsUUFBUXlCLFdBQTNDLFlBR0pMLGdCQUFnQlIsR0FDWixNQUFNWSxFQUFlN0UsS0FBS3NELE1BQU1wRSxjQUFYLFdBQTZCYyxLQUFLcUQsUUFBUXlCLFdBQTFDLFlBQXdEYixFQUFhYyxLQUMxRmQsRUFBYTNDLFVBQVUyQixPQUFPakQsS0FBS3FELFFBQVEyQixpQkFDM0NILEVBQWF2RCxVQUFVMkIsT0FBdkIsVUFBaUNqRCxLQUFLcUQsUUFBUXlCLFdBQTlDLFlBQ0FELEVBQWE3QyxZQUFjLEdBRy9CaUQsa0JBQ0lqRixLQUFLK0QscUJBQ0wvRCxLQUFLdUQsV0FBV1MsU0FBU0MsSUFDckJqRSxLQUFLeUUsZ0JBQWdCUixPQ3BFbEIsTUFBTWlCLEVBQ2pCMUYsWUFBWTJGLEdBQ1JuRixLQUFLb0YsT0FBU25HLFNBQVNDLGNBQWNpRyxHQUNyQ25GLEtBQUtxRixhQUFlckYsS0FBS29GLE9BQU9sRyxjQUFjLGlCQUM5Q2MsS0FBS3NGLG9CQUFzQnRGLEtBQUt1RixnQkFBZ0IvQyxLQUFLeEMsTUFHekR3RixPQUNJeEYsS0FBS29GLE9BQU85RCxVQUFVQyxJQUFJLGdCQUMxQnRDLFNBQVNrRCxpQkFBaUIsVUFBV25DLEtBQUtzRixxQkFHOUNHLFFBQ0l6RixLQUFLb0YsT0FBTzlELFVBQVUyQixPQUFPLGdCQUM3QmhFLFNBQVN5RyxvQkFBb0IsVUFBVzFGLEtBQUtzRixxQkFHakRDLGdCQUFnQkksR0FDSSxXQUFaQSxFQUFJQyxLQUNKNUYsS0FBS3lGLFFBSWJJLG9CQUVJN0YsS0FBS3FGLGFBQWFsRCxpQkFBaUIsUUFBU25DLEtBQUt5RixNQUFNakQsS0FBS3hDLE9BRTVEQSxLQUFLb0YsT0FBT2pELGlCQUFpQixhQUFjd0QsSUFDbkNBLEVBQUlHLFNBQVdILEVBQUlJLGVBQ25CL0YsS0FBS3lGLFlDM0JOLE1BQU1PLFVBQXNCZCxFQUN2QzFGLFlBQVkyRixFQUFlYyxHQUN2QkMsTUFBTWYsR0FDTm5GLEtBQUtpRyxpQkFBbUJBLEVBQ3hCakcsS0FBS21HLGNBQWdCbkcsS0FBS29GLE9BQU9sRyxjQUFjLGtCQUMvQ2MsS0FBS3VELFdBQWF2RCxLQUFLb0YsT0FBTzFCLGlCQUFpQixVQUMvQzFELEtBQUs2RixvQkFHVE8sa0JBS0ksT0FKQXBHLEtBQUtxRyxXQUFhLEdBQ2xCckcsS0FBS3VELFdBQVdTLFNBQVFzQyxJQUNwQnRHLEtBQUtxRyxXQUFXQyxFQUFNcEcsTUFBUW9HLEVBQU1DLFNBRWpDdkcsS0FBS3FHLFdBR2hCUixvQkFDSTdGLEtBQUtzRCxNQUFRdEQsS0FBS29GLE9BQU9sRyxjQUFjLHFCQUN2Q2MsS0FBS3NELE1BQU1uQixpQkFBaUIsVUFBV3dELElBQ25DQSxFQUFJYSxpQkFFSnhHLEtBQUtpRyxpQkFBaUJqRyxLQUFLb0csa0JBQW1CcEcsS0FBS21HLGtCQUV2REQsTUFBTUwsb0JBR1ZZLGVBQWVDLEdBQ1gxRyxLQUFLdUQsV0FBV1MsU0FBU3NDLElBRXJCQSxFQUFNQyxNQUFRRyxFQUFLSixFQUFNcEcsU0FJakN1RixRQUNJekYsS0FBS3NELE1BQU1xRCxRQUNYVCxNQUFNVCxTLHdIQzFCZCxNQUFNbUIsRUFBTSxJQ1pHLE1BQ1hwSCxZQUFZLEdBQXNCLElBQXRCLFFBQUVxSCxFQUFGLFFBQVdDLEdBQVcscUJBb0N0QnJILEdBQ0RzSCxNQUFNL0csS0FBS2dILFNBQVUsQ0FDeEJDLE9BQVEsT0FDUkgsUUFBUzlHLEtBQUtrSCxTQUNkQyxLQUFNQyxLQUFLQyxVQUFVNUgsS0FDdEJnRCxNQUFLNkUsR0FBT3RILEtBQUt1SCxpQkFBaUJELE9BekNQLHFCQThDcEJ2QyxHQUNIZ0MsTUFBTSxHQUFELE9BQUkvRyxLQUFLZ0gsVUFBVCxPQUFvQmpDLEdBQU0sQ0FDbENrQyxPQUFRLFNBQ1JILFFBQVM5RyxLQUFLa0gsV0FDZnpFLE1BQUs2RSxHQUFPdEgsS0FBS3VILGlCQUFpQkQsT0FsRFAsbUJBc0R0QnZDLEdBQ0RnQyxNQUFNLEdBQUQsT0FBSS9HLEtBQUtnSCxVQUFULE9BQW9CakMsRUFBcEIsVUFBZ0MsQ0FDeENrQyxPQUFRLE1BQ1JILFFBQVM5RyxLQUFLa0gsV0FDZnpFLE1BQUs2RSxHQUFPdEgsS0FBS3VILGlCQUFpQkQsT0ExRFAsc0JBNkRuQnZDLEdBQ0pnQyxNQUFNLEdBQUQsT0FBSS9HLEtBQUtnSCxVQUFULE9BQW9CakMsRUFBcEIsVUFBZ0MsQ0FDeENrQyxPQUFRLFNBQ1JILFFBQVM5RyxLQUFLa0gsV0FDZnpFLE1BQUs2RSxHQUFPdEgsS0FBS3VILGlCQUFpQkQsT0FoRXJDdEgsS0FBS3dILFNBQVdYLEVBQ2hCN0csS0FBS3lILGdCQUFMLFVBQTBCekgsS0FBS3dILFNBQS9CLGFBQ0F4SCxLQUFLZ0gsU0FBTCxVQUFtQmhILEtBQUt3SCxTQUF4QixVQUNBeEgsS0FBSzBILFdBQUwsVUFBcUIxSCxLQUFLd0gsU0FBMUIsb0JBQ0F4SCxLQUFLa0gsU0FBV0osRUFHcEJhLGlCQUNJLE9BQU9aLE1BQU0vRyxLQUFLeUgsZ0JBQWlCLENBQy9CWCxRQUFTOUcsS0FBS2tILFdBQ2Z6RSxNQUFLNkUsR0FBT3RILEtBQUt1SCxpQkFBaUJELEtBR3pDTSxjQUNJLE9BQU9iLE1BQU0vRyxLQUFLZ0gsU0FBVSxDQUN4QkYsUUFBUzlHLEtBQUtrSCxXQUNmekUsTUFBSzZFLEdBQU90SCxLQUFLdUgsaUJBQWlCRCxLQUd6Q08sZ0JBQWdCcEksR0FDWixPQUFPc0gsTUFBTS9HLEtBQUt5SCxnQkFBaUIsQ0FDL0JSLE9BQVEsUUFDUkgsUUFBUzlHLEtBQUtrSCxTQUNkQyxLQUFNQyxLQUFLQyxVQUFVNUgsS0FDdEJnRCxNQUFLNkUsR0FBT3RILEtBQUt1SCxpQkFBaUJELEtBR3pDUSxlQUFlckksR0FDWCxPQUFPc0gsTUFBTS9HLEtBQUswSCxXQUFZLENBQzFCVCxPQUFRLFFBQ1JILFFBQVM5RyxLQUFLa0gsU0FDZEMsS0FBTUMsS0FBS0MsVUFBVTVILEtBQ3RCZ0QsTUFBSzZFLEdBQU90SCxLQUFLdUgsaUJBQWlCRCxLQW1DekNDLGlCQUFpQkQsR0FDYixPQUFLQSxFQUFJUyxHQUdGVCxFQUFJVSxPQUZBQyxRQUFRQyxPQUFSLGtCQUEwQlosRUFBSWEsT0FBOUIsYUFBeUNiLEVBQUljLGVOM0RoRCxDQUNadkIsUUFBUyx5Q0FDVEMsUUFBUyxDQUNMdUIsY0FBZSx1Q0FDZixlQUFnQixzQktIbEJDLEVBQVcsSUViRixNQUNYOUksWUFBWSxFQUFjK0ksR0FBbUIsSUFBakMsU0FBRUMsR0FBK0IsRUFDekN4SSxLQUFLeUksVUFBWUQsRUFDakJ4SSxLQUFLMEksV0FBYXpKLFNBQVNDLGNBQWNxSixHQUc3Q0ksUUFBUUMsR0FDSjVJLEtBQUswSSxXQUFXRyxPQUFPRCxHQUczQkUsWUFBWUYsR0FDUjVJLEtBQUswSSxXQUFXSyxRQUFRSCxHQUc1QkksUUFDSWhKLEtBQUswSSxXQUFXTyxVQUFZLEdBR2hDQyxZQUFZQyxHQUNSbkosS0FBS2dKLFFBQ0xoSixLQUFLb0osZUFBaUJELEVBRXRCbkosS0FBS29KLGVBQWVwRixTQUFRcUYsSUFDeEJySixLQUFLeUksVUFBVVksUUZWRSxDQUN6QmIsU0FBV2EsSUFDUCxNQUFNQyxFQUFjckksRUFBV29JLEdBQy9CZixFQUFTSyxRQUFRVyxLQUV0QixVQUNHQyxFQUFZLElBQUl2RCxFQUFjLG9CQWlEcEMsU0FBaUN2RyxFQUFLK0osR0FDbENDLEdBQWMsRUFBTUQsR0FDcEI1QyxFQUFJaUIsZ0JBQWdCcEksR0FBS2dELE1BQUtoRCxJQUMxQmlLLEVBQVNDLFlBQVlsSyxFQUFJUyxLQUFNVCxFQUFJbUssT0FDbkNMLEVBQVU5RCxXQUNYOUMsT0FBTUMsR0FBS0MsUUFBUUMsTUFBTUYsS0FDNUI2RyxHQUFjLEVBQU9ELE1BdERuQkssRUFBVyxJQUFJN0QsRUFBYyxtQkEwRG5DLFNBQThCdkcsRUFBSytKLEdBQy9CQyxHQUFjLEVBQU1ELEdBQ3BCNUMsRUFBSWtELFNBQVNySyxHQUFLZ0QsTUFBS2hELElBQ25CLE1BQU02SixFQUFjckksRUFBV3hCLEdBQy9CNkksRUFBU1EsWUFBWVEsR0FDckJPLEVBQVNwRSxXQUNWOUMsT0FBTUMsR0FBS0MsUUFBUUMsTUFBTUYsS0FDNUI2RyxHQUFjLEVBQU9ELE1BaEVuQk8sRUFBYSxJR25CSixjQUE2QjdFLEVBQ3hDMUYsWUFBWTJGLEdBQ1JlLE1BQU1mLEdBQ05uRixLQUFLZ0ssZUFBaUJoSyxLQUFLb0YsT0FBT2xHLGNBQWMsb0JBQ2hEYyxLQUFLaUssb0JBQXNCakssS0FBS29GLE9BQU9sRyxjQUFjLG9CQUd6RHNHLEtBQUt0RixFQUFNRSxHQUNQSixLQUFLZ0ssZUFBZTlILElBQU1oQyxFQUMxQkYsS0FBS2dLLGVBQWUvSCxJQUFNN0IsRUFDMUJKLEtBQUtpSyxvQkFBb0JqSSxZQUFjOUIsRUFDdkNnRyxNQUFNVixTSFF3QixnQkFDaEMxRixFQUFjLElJcEJMLGNBQW9Db0YsRUFDL0MxRixZQUFZMkYsRUFBZWMsR0FDdkJDLE1BQU1mLEdBQ05uRixLQUFLaUcsaUJBQW1CQSxFQUN4QmpHLEtBQUsrQixxQkFHVEEscUJBQ0kvQixLQUFLc0QsTUFBUXRELEtBQUtvRixPQUFPbEcsY0FBYyxxQkFDdkNjLEtBQUtzRCxNQUFNbkIsaUJBQWlCLFVBQVd3RCxJQUNuQ0EsRUFBSWEsaUJBRUp4RyxLQUFLaUcsaUJBQWlCakcsS0FBS2tLLFdBQVlsSyxLQUFLK0UsT0FHaERtQixNQUFNTCxvQkFHVkwsS0FBSzBFLEVBQVluRixHQUNibUIsTUFBTVYsT0FDTnhGLEtBQUtrSyxXQUFhQSxFQUNsQmxLLEtBQUsrRSxHQUFLQSxJSkQ0QixzQkFrRTlDLFNBQWdDbUYsRUFBWW5GLEdBQ3hDNkIsRUFBSXNELFdBQVduRixHQUFJdEMsTUFBSyxLQUNwQnlILElBQ0FwSyxFQUFZMkYsV0FDYjlDLE9BQU1DLEdBQUtDLFFBQVFDLE1BQU1GLFFBckUxQnVILEVBQW9CLElBQUluRSxFQUFjLDRCQXlFNUMsU0FBZ0N2RyxFQUFLK0osR0FDakNDLEdBQWMsRUFBTUQsR0FDcEI1QyxFQUFJa0IsZUFBZXJJLEdBQUtnRCxNQUFLaEQsSUFDekJpSyxFQUFTVSxjQUFjM0ssRUFBSUosUUFDM0I4SyxFQUFrQjFFLFdBQ25COUMsT0FBTUMsR0FBS0MsUUFBUUMsTUFBTUYsS0FDNUI2RyxHQUFjLEVBQU9ELE1BOUVuQkUsRUFBVyxJS3hCRixNQUNYbEssWUFBWTZLLEVBQWNDLEVBQWdCQyxHLFVBa0JyQixJQUNWdkssS0FBS3dLLGtCLEVBbkIwQyw2QixzQkFBQSxLLHVEQUFBLEssS0FDdER4SyxLQUFLeUssYUFBZXhMLFNBQVNDLGNBQWNtTCxHQUMzQ3JLLEtBQUswSyxlQUFpQnpMLFNBQVNDLGNBQWNvTCxHQUM3Q3RLLEtBQUsySyxlQUFpQjFMLFNBQVNDLGNBQWNxTCxHQUdqREssY0FTSSxPQVJBNUssS0FBS0MsTUFBUUQsS0FBS3lLLGFBQWF6SSxZQUMvQmhDLEtBQUs2SyxPQUFTN0ssS0FBSzBLLGVBQWUxSSxZQUVsQ2hDLEtBQUs4SyxLQUFPLENBQ1I1SyxLQUFNRixLQUFLQyxNQUNYMkosTUFBTzVKLEtBQUs2SyxRQUdUN0ssS0FBSzhLLEtBT2hCQyxzQkFBc0JDLEdBQ2xCaEwsS0FBS3dLLGlCQUFtQlEsRUFHNUJyQixZQUFZc0IsRUFBV0MsR0FDbkJsTCxLQUFLeUssYUFBYXpJLFlBQWNpSixFQUNoQ2pMLEtBQUswSyxlQUFlMUksWUFBY2tKLEVBR3RDZCxjQUFjZSxHQUNWbkwsS0FBSzJLLGVBQWUxSSxJQUFNa0osSUxUSixpQkFBa0IsbUJBQW9CLG9CQStCcEUsU0FBU2xLLEVBQVd4QixHQUtoQixPQUhnQixJQUFJRixFQUFLRSxFQUFLLGtCQUFtQkUsRUFBaUJpSCxFQUFJaEgsWUFBYWdILEVBQUkvRyxTQUNuRkMsRUFBWTBGLEtBQUtoRCxLQUFLMUMsR0FBYzRKLEVBQVMwQixvQkFDckJuSyxhQUloQyxTQUFTdEIsRUFBZ0JPLEVBQU1tTCxHQUMzQnRCLEVBQVd2RSxLQUFLdEYsRUFBTW1MLEdBeUMxQixTQUFTNUIsRUFBYzZCLEVBQVc5QixHQUUxQkEsRUFBYXhILFlBRGJzSixFQUMyQixnQkFFQSxZQWhGVG5JLE1BSDFCNEcsRUFBV2xFLG9CQUdlMUMsRUx6QlgsQ0FDWEMsS0FBTSxvQkFDTk8sY0FBZSxTQUNmRSxxQkFBc0IsaUJBQ3RCTyxvQkFBcUIsaUJBQ3JCWSxnQkFBaUIsbUJBQ2pCRixXQUFZLGVLb0JLdEIsTUFBTUMsS0FBS3hFLFNBQVN5RSxpQkFBaUJQLEVBQU9DLE9BQ3BEWSxTQUFTdUgsSUFDZCxNQUFNQyxFQUFZLElBQUl0SSxFQUFjQyxFQUFRb0ksR0FFdENFLEVBQVdGLEVBQVlHLGFBQWEsUUFHMUNwTSxFQUFlbU0sR0FBWUQsRUFDM0JBLEVBQVUxSCxzQkFPbEJtRSxRQUFRMEQsSUFBSSxDQUFDL0UsRUFBSWUsaUJBQWtCZixFQUFJZ0IsZ0JBQ2xDbkYsTUFBSyxJQUFnQyxJQUE5Qm1KLEVBQWVDLEdBQWUsRUFDbENuQyxFQUFTcUIsc0JBQXNCYSxHQUMvQmxDLEVBQVNDLFlBQVlpQyxFQUFjMUwsS0FBTTBMLEVBQWNoQyxPQUN2REYsRUFBU1UsY0FBY3dCLEVBQWN2TSxRQUVyQ2lKLEVBQVNZLFlBQVkyQyxNQStEN0IxTSxFQUFXZ0QsaUJBQWlCLFNBQVMsV0FDakNvSCxFQUFVL0QsT0FDVitELEVBQVU5QyxlQUFlaUQsRUFBU2tCLGtCQUV0Q3hMLEVBQVUrQyxpQkFBaUIsU0FBUyxXQUNoQzdDLEVBQUFBLFNBQUFBLGtCQUNBdUssRUFBU3JFLFVBRWJuRyxFQUFPOEMsaUJBQWlCLFNBQVMsV0FDN0JnSSxFQUFrQjNFLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9NZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vTWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL01lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL01lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vTWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xyXG5jb25zdCBidXR0b25FZGl0ID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWVkaXQnKTtcclxuY29uc3QgYnV0dG9uQWRkID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWFkZCcpO1xyXG5jb25zdCBhdmF0YXIgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItaG92ZXInKTtcclxuY29uc3QgY29uZmlnID0ge1xyXG4gICAgZm9ybTogJy5wb3B1cF9fY29udGFpbmVyJyxcclxuICAgIGlucHV0U2VsZWN0b3I6ICcuaW5wdXQnLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuYnV0dG9uLXN1Ym1pdCcsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2ludmFsaWQnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAnaW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAnaW5wdXQtZXJyb3InXHJcbn07XHJcbmNvbnN0IGFwaURhdGEgPSB7XHJcbiAgICBiYXNlVVJMOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00Ni8nLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246ICcxMzc0OWVjMi0yNDVmLTRmY2QtOGYyMi00NTFlODRiZWM2NmInLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxufTtcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmV4cG9ydCB7IGJ1dHRvbkVkaXQsIGJ1dHRvbkFkZCwgY29uZmlnLCBmb3JtVmFsaWRhdG9ycywgYXZhdGFyLCBhcGlEYXRhIH07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvYmosIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBkZWxldGVMaWtlcywgcHV0TGlrZXMsIHBvcHVwRGVsZXRlLCBmdWxsUGFja0luZm9PYmopIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gb2JqLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IG9iai5saW5rO1xyXG4gICAgICAgIHRoaXMuX2lkID0gb2JqLl9pZDtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IG9iai5saWtlcztcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gb2JqLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUxpa2VzID0gZGVsZXRlTGlrZXM7XHJcbiAgICAgICAgdGhpcy5fcHV0TGlrZXMgPSBwdXRMaWtlcztcclxuICAgICAgICB0aGlzLl9wb3B1cERlbGV0ZSA9IHBvcHVwRGVsZXRlO1xyXG4gICAgICAgIHRoaXMuX215SWQgPSBmdWxsUGFja0luZm9PYmooKS5faWQ7XHJcbiAgICAgICAgdGhpcy5fbXlOYW1lID0gZnVsbFBhY2tJbmZvT2JqKCkubmFtZTtcclxuICAgIH1cclxuICAgIC8q0KHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4Ki9cclxuICAgIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fbmV3Q2FyZCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1kZWxldGUnKTtcclxuXHJcbiAgICAgICAgLy/QldGB0LvQuCBJZCDQstC70LDQtNC10LvRjNGG0LAg0LrQsNGA0YLQvtGH0LrQuCDQvdC1INGB0L7QstC/0LDQtNCw0LXRgiDRgSDQvNC+0LjQvCBJZCwg0YLQviDQutC90L7Qv9C60LUgZGVsZXRlINC00L7QsdCw0LLQu9GP0Y4g0LrQu9Cw0YHRgSBcItC90LXQstC40LTQuNC80L7RgdGC0LhcIlxyXG4gICAgICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl9teUlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5jbGFzc0xpc3QuYWRkKCdidXR0b24tZGVsZXRlX2luYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpdGxlQ2FyZCA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJyk7XHJcbiAgICAgICAgdGhpcy5idXR0b25MaWtlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWxpa2UnKTtcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19waG90bycpO1xyXG4gICAgICAgIHRoaXMuY2FyZENvdW50TGlrZSA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2NvdW50LWxpa2UnKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saWtlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGlrZXNbaV0ubmFtZSA9PT0gdGhpcy5fbXlOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDbGFzc0xpa2UoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGVDYXJkLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLmNhcmRDb3VudExpa2UudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9uZXdDYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIC8q0KPRgdGC0LDQvdC+0LLQutCwINGB0LvRg9GI0LDRgtC10LvQtdC5Ki9cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoJ2J1dHRvbi1saWtlX2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRMaWtlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVMaWtlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9idXR0b25EZWxldGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXR0b24tZGVsZXRlX2luYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9wb3B1cERlbGV0ZSh0aGlzLl9kZWxldGVDYXJkLmJpbmQodGhpcyksIHRoaXMuX2lkKSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGhvdG9MaW5rQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspOyAvKtCh0YLRgNC10LvQvtGH0L3QsNGPINGE0YPQvdC60YbQuNGPLNGH0YLQvtCx0Ysg0L/RgNC40L3QuNC80LDQu9CwINCy0LXRgNC90YvQuSB0aGlzLiDQotCw0Log0LbQtSDQvNC+0LbQvdC+INC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDQvNC10YLQvtC0IGJpbmQoKSovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZExpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcHV0TGlrZXModGhpcy5faWQpLnRoZW4oKHIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0Q2xhc3NMaWtlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZENvdW50TGlrZS50ZXh0Q29udGVudCA9IHIubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUxpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlTGlrZXModGhpcy5faWQpLnRoZW4oKHIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0Q2xhc3NMaWtlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZENvdW50TGlrZS50ZXh0Q29udGVudCA9IHIubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldENsYXNzTGlrZSgpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnYnV0dG9uLWxpa2VfYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlRG9tQ2FyZCgpO1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9kZWxldGVEb21DYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmQucmVtb3ZlKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLl9jb25maWcuaW5wdXRTZWxlY3Rvcn1gKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3J9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyrQktC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YsqL1xyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvLyDRh9GC0L7QsdGLINC/0YDQvtCy0LXRgNC40YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4INCyINGB0LDQvNC+0Lwg0L3QsNGH0LDQu9C1XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIC8vINGH0YLQvtCx0Ysg0L/RgNC+0LLQtdGA0Y/RgtGMINC10LPQviDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC70Y7QsdC+0LPQviDQuNC3INC/0L7Qu9C10LlcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2NvbmZpZy5lcnJvckNsYXNzfV8ke2lucHV0RWxlbWVudC5pZH1gKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5fY29uZmlnLmVycm9yQ2xhc3N9X2FjdGl2ZWApO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9jb25maWcuZXJyb3JDbGFzc31fJHtpbnB1dEVsZW1lbnQuaWR9YCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYCR7dGhpcy5fY29uZmlnLmVycm9yQ2xhc3N9X2FjdGl2ZWApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JQb3B1cCk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWNsb3NlJyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2ViaW5kID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZWJpbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZWJpbmQpO1xyXG4gICAgfVxyXG4gICAgLyrQl9Cw0LrRgNGL0YLQuNC1IHBvcHVwINC60LvQsNCy0LjRiNC10LkgRXNjKi9cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLyrQo9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9GPINC90LAg0LrQvdC+0L/QutGDIENsb3NlKi9cclxuICAgICAgICB0aGlzLl9idXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLyrQo9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9GPINC90LAgT3ZlcmxheSovXHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1zdWJtaXQnKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQnKVxyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtVmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtVmFsdWVzXHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCksIHRoaXMuX2J1dHRvblN1Ym1pdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIC8vINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBgdmFsdWVgINC40L3Qv9GD0YLQsCDQtNCw0L3QvdGL0LUg0LjQtyDQvtCx0YrQtdC60YLQsCDQv9C+INCw0YLRgNC40LHRg9GC0YMgYG5hbWVgINGN0YLQvtCz0L4g0LjQvdC/0YPRgtCwXHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7LyrQntGH0LjRgdGC0LrQsCDRhNC+0YDQvNGLKi9cclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG59IiwiLy9pbXBvcnQgJy4vaW5kZXguY3NzJ1xyXG5cclxuaW1wb3J0IHsgYnV0dG9uRWRpdCwgYnV0dG9uQWRkLCBjb25maWcsIGZvcm1WYWxpZGF0b3JzLCBhdmF0YXIsIGFwaURhdGEgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcydcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJ1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJ1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcydcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcydcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcydcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpRGF0YSk7XHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfVxyXG59LCAnLmNhcmRzJyk7XHJcbmNvbnN0IHBvcHVwRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfZm9ybV9lZGl0JywgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfZm9ybV9hZGQnLCBoYW5kbGVDYXJkRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9waG90bycpO1xyXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF9mb3JtX2RlbGV0ZScsIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQpO1xyXG5jb25zdCBwb3B1cFVwZGF0ZUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfZm9ybV91cGRhdGVBdmF0YXInLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcclxuY29uc3QgdXNlckRhdGEgPSBuZXcgVXNlckluZm8oJy5wcm9maWxlX19uYW1lJywgJy5wcm9maWxlX19zdGF0dXMnLCAnLnByb2ZpbGVfX2F2YXRhcicpO1xyXG5cclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuFxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm0pKVxyXG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KVxyXG4gICAgICAgIC8vINC/0L7Qu9GD0YfQsNC10Lwg0LTQsNC90L3Ri9C1INC40Lcg0LDRgtGA0LjQsdGD0YLQsCBgbmFtZWAg0YMg0YTQvtGA0LzRi1xyXG4gICAgICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJylcclxuXHJcbiAgICAgICAgLy8g0LLQvtGCINGC0YPRgiDQsiDQvtCx0YrQtdC60YIg0LfQsNC/0LjRgdGL0LLQsNC10Lwg0L/QvtC0INC40LzQtdC90LXQvCDRhNC+0YDQvNGLXHJcbiAgICAgICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcclxuXHJcbi8v0J/QtdGA0LLQvtC90LDRh9Cw0LvRjNC90LDRjyDQt9Cw0LPRgNGD0LfQutCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQuCDRgSDRgdC10YDQstC10YDQsCDQuCDQv9C+0LvRg9GH0LXQvdC40LUg0L3QsNGH0LDQu9GM0L3Ri9GFINC60LDRgNGC0L7Rh9C10LpcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXREYXRhUHJvZmlsZSgpLCBhcGkuZ2V0RGF0YUNhcmQoKV0pXHJcbiAgICAudGhlbigoW2l0ZW1zVXNlckRhdGEsIGl0ZW1zQ2FyZF0pID0+IHtcclxuICAgICAgICB1c2VyRGF0YS5zYXZlU2VydmVySW5mb3JtYXRpb24oaXRlbXNVc2VyRGF0YSk7XHJcbiAgICAgICAgdXNlckRhdGEuc2V0VXNlckluZm8oaXRlbXNVc2VyRGF0YS5uYW1lLCBpdGVtc1VzZXJEYXRhLmFib3V0KTtcclxuICAgICAgICB1c2VyRGF0YS5zZXRVc2VyQXZhdGFyKGl0ZW1zVXNlckRhdGEuYXZhdGFyKTtcclxuICAgICAgICAvL9Cy0YvQt9C+0LIg0YDQtdC90LTQtdGA0LAg0L3QsNGH0LDQu9GM0L3Ri9GFINC60LDRgNGC0L7Rh9C10LpcclxuICAgICAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhpdGVtc0NhcmQpO1xyXG4gICAgfSk7XHJcblxyXG4vKtCh0L7Qt9C00LDQvdC40LUg0L3QvtCy0YvRhSDQutCw0YDRgtC+0YfQtdC6Ki9cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChvYmopIHtcclxuICAgIC8v0KfRgtC+0LHRiyDQv9GA0Lgg0L/QtdGA0LXQtNCw0YfQtSDQvNC10YLQvtC00LAg0L3QtSDRgtC10YDRj9C70YHRjyDQutC+0L3RgtC10LrRgdGCIHRoaXMg0LzQtdGC0L7QtNGLINC30LDQv9C40YHQsNC90Ysg0LrQsNC6INGB0YLRgNC10LvQvtGH0L3Ri9C1INGE0YPQvdC60YbQuNC4XHJcbiAgICBjb25zdCBjYXJkTmV3ID0gbmV3IENhcmQob2JqLCAnLnRlbXBsYXRlX19jYXJkJywgaGFuZGxlQ2FyZENsaWNrLCBhcGkuZGVsZXRlTGlrZXMsIGFwaS5wdXRMaWtlcyxcclxuICAgICAgICBwb3B1cERlbGV0ZS5vcGVuLmJpbmQocG9wdXBEZWxldGUpLCB1c2VyRGF0YS5nZXRGdWxsUGFja0luZm9PYmopO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkTmV3LmNyZWF0ZUNhcmQoKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudFxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgdXJsKSB7XHJcbiAgICBwb3B1cEltYWdlLm9wZW4obmFtZSwgdXJsKTtcclxufVxyXG5cclxuLyrQodC+0YXRgNCw0L3QtdC90LjQtSDQuCDQvtGC0YHRi9C70LrQsCDQtNCw0L3QvdGL0YUg0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC90LAg0YHQtdGA0LLQtdGAKi9cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQob2JqLCBidXR0b25TdWJtaXQpIHtcclxuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYnV0dG9uU3VibWl0KTtcclxuICAgIGFwaS5zZW5kRGF0YVByb2ZpbGUob2JqKS50aGVuKG9iaiA9PiB7XHJcbiAgICAgICAgdXNlckRhdGEuc2V0VXNlckluZm8ob2JqLm5hbWUsIG9iai5hYm91dCk7XHJcbiAgICAgICAgcG9wdXBFZGl0LmNsb3NlKCk7XHJcbiAgICB9KS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xyXG4gICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgYnV0dG9uU3VibWl0KTtcclxufVxyXG5cclxuLyrQodC+0YXRgNCw0L3QtdC90LjQtSDQuCDQvtGC0YHRi9C70LrQsCDQtNCw0L3QvdGL0YUg0L3QsCDRgdC10YDQstC10YAsINCwINGC0LDQuiDQttC1INC/0L7RgdC70LXQtNGD0Y7RidC10LUg0LTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4Ki9cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQob2JqLCBidXR0b25TdWJtaXQpIHtcclxuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYnV0dG9uU3VibWl0KTtcclxuICAgIGFwaS5wb3N0Q2FyZChvYmopLnRoZW4ob2JqID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQob2JqKTtcclxuICAgICAgICBjYXJkTGlzdC5wcmVwZW5kSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgcG9wdXBBZGQuY2xvc2UoKTtcclxuICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBidXR0b25TdWJtaXQpO1xyXG59XHJcbi8q0KPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4INGC0L7Qu9GM0LrQviDQv9C+0YHQu9C1INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPKi9cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZFN1Ym1pdChkZWxldGVDYXJkLCBpZCkge1xyXG4gICAgYXBpLmRlbGV0ZUNhcmQoaWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZUNhcmQoKTtcclxuICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxufVxyXG5cclxuLyrQodC+0YXRgNCw0L3QtdC90LjQtSDQtNCw0L3QvdGL0YUg0Lgg0L/QvtGB0LvQtdC00YPRjtGJ0LDRjyDQt9Cw0LzQtdC90LAg0LDQstCw0YLQsNGA0LAqL1xyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KG9iaiwgYnV0dG9uU3VibWl0KSB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIGJ1dHRvblN1Ym1pdCk7XHJcbiAgICBhcGkuc2VuZERhdGFBdmF0YXIob2JqKS50aGVuKG9iaiA9PiB7XHJcbiAgICAgICAgdXNlckRhdGEuc2V0VXNlckF2YXRhcihvYmouYXZhdGFyKTtcclxuICAgICAgICBwb3B1cFVwZGF0ZUF2YXRhci5jbG9zZSgpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGJ1dHRvblN1Ym1pdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBidXR0b25TdWJtaXQpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAnQ9C+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICdD0L7RhdGA0LDQvdC40YLRjCc7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8q0J3QsNCy0LXRiNC40LLQsNC90LjQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0YHQvtCx0YvRgtC40Lkg0L3QsCDQutC90L7Qv9C60LggZWRpdCwgYWRkINC4INCw0LLQsNGC0LDRgCovXHJcbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBwb3B1cEVkaXQub3BlbigpO1xyXG4gICAgcG9wdXBFZGl0LnNldElucHV0VmFsdWVzKHVzZXJEYXRhLmdldFVzZXJJbmZvKCkpO1xyXG59KTtcclxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbJ2Zvcm1DYXJkJ10ucmVzZXRWYWxpZGF0aW9uKCk7IC8q0JLRi9Cx0LjRgNCw0Y4g0L3Rg9C20L3Rg9GOINC80L3QtSDRhNC+0YDQvNGDINC00LvRjyB2YWxpZCovXHJcbiAgICBwb3B1cEFkZC5vcGVuKCk7XHJcbn0pO1xyXG5hdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBwb3B1cFVwZGF0ZUF2YXRhci5vcGVuKCk7XHJcbn0pIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgYmFzZVVSTCwgaGVhZGVycyB9KSB7XHJcbiAgICAgICAgdGhpcy5fYmFzZVVSTCA9IGJhc2VVUkw7XHJcbiAgICAgICAgdGhpcy5fdXJsRGF0YVByb2ZpbGUgPSBgJHt0aGlzLl9iYXNlVVJMfXVzZXJzL21lL2A7XHJcbiAgICAgICAgdGhpcy5fdXJsQ2FyZCA9IGAke3RoaXMuX2Jhc2VVUkx9Y2FyZHMvYDtcclxuICAgICAgICB0aGlzLl91cmxBdmF0YXIgPSBgJHt0aGlzLl9iYXNlVVJMfXVzZXJzL21lL2F2YXRhci9gO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGFQcm9maWxlKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmxEYXRhUHJvZmlsZSwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGFDYXJkKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmxDYXJkLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZERhdGFQcm9maWxlKG9iaikge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmxEYXRhUHJvZmlsZSwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqKSxcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZERhdGFBdmF0YXIob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybEF2YXRhciwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqKSxcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdENhcmQgPSAob2JqKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybENhcmQsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqKSxcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcbiAgICAvL9CS0YvQstC+0LQg0YTRg9C90LrRhtC40Lgg0YfQtdGA0LXQtyDRgdGC0YDQtdC70L7Rh9C90YPRjiDRh9GC0L7QsdGLINC/0YDQuCDQv9C10YDQtdC00LDRh9C1INC00LDQvdC90L7Qs9C+INC80LXRgtC+0LTQsCDQsiDQtNGA0YPQs9C+0Lkg0LrQu9Cw0YHRgSDQvdC1INGC0LXRgNGP0LvRgdGPINC60L7QvdGC0LXQutGB0YIgdGhpc1xyXG4gICAgLy/QotCw0Log0LbQtSDQstC+0LfQvNC+0LbQtdC9INCy0LDRgNC40LDQvdGCINC60L7Qs9C00LAg0L/RgNC4INC/0LXRgNC10LTQsNGH0LUg0LzQtdGC0L7QtNCwINC+0LTQvdC+0LPQviDQutC70LDRgdGB0LAg0LIg0LTRgNGD0LPQvtC5INC60LvQsNGB0YFcclxuICAgIC8v0JfQsNC60YDQtdC/0LvRj9GC0YwgdGhpcyDQvNC10YLQvtC00L7QvCBiaW5kKClcclxuICAgIGRlbGV0ZUNhcmQgPSAoaWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsQ2FyZH0ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHV0TGlrZXMgPSAoaWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsQ2FyZH0ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2VzID0gKGlkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybENhcmR9JHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFJlc3BvbnNlRGF0YShyZXMpIHtcclxuICAgICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfSAgJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvclBvcHVwKSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBCaWdQaG90byA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYmlnUGhvdG8nKTtcclxuICAgICAgICB0aGlzLl9wb3B1cFBob3RvU3VidGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1YnRpdGxlJyk7XHJcbiAgICB9XHJcbiAgICAvKtCj0LLQtdC70LjRh9C10L3QuNC1INGE0L7RgtC+Ki9cclxuICAgIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQmlnUGhvdG8uYWx0ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9wb3B1cEJpZ1Bob3RvLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBQaG90b1N1YnRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuZGVsZXRlQ2FyZCwgdGhpcy5pZCk7XHJcbiAgICAgICAgICAgIC8qc3VwZXIuY2xvc2UoKTsqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihkZWxldGVDYXJkLCBpZCkge1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKVxyXG4gICAgICAgIHRoaXMuZGVsZXRlQ2FyZCA9IGRlbGV0ZUNhcmQ7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIHN0YXR1c1NlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN0YXR1c1NlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gICAgICAgIHRoaXMuX2Fib3V0ID0gdGhpcy5fcHJvZmlsZVN0YXR1cy50ZXh0Q29udGVudDtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvID0ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxyXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fYWJvdXRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5pbmZvXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RnVsbFBhY2tJbmZvT2JqID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5mb3JtYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVNlcnZlckluZm9ybWF0aW9uKHVzZXJJbmZvcm1hdGlvbikge1xyXG4gICAgICAgIHRoaXMuX3VzZXJJbmZvcm1hdGlvbiA9IHVzZXJJbmZvcm1hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhpbnB1dE5hbWUsIGlucHV0U3RhdHVzKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWU7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZVN0YXR1cy50ZXh0Q29udGVudCA9IGlucHV0U3RhdHVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJBdmF0YXIoYXZhdGFyTGluaykge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyTGluaztcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9uRWRpdCIsImJ1dHRvbkFkZCIsImF2YXRhciIsImZvcm1WYWxpZGF0b3JzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwib2JqIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiZGVsZXRlTGlrZXMiLCJwdXRMaWtlcyIsInBvcHVwRGVsZXRlIiwiZnVsbFBhY2tJbmZvT2JqIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2RlbGV0ZUxpa2VzIiwiX3B1dExpa2VzIiwiX3BvcHVwRGVsZXRlIiwiX215SWQiLCJfbXlOYW1lIiwiY3JlYXRlQ2FyZCIsIl9uZXdDYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9idXR0b25EZWxldGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0aXRsZUNhcmQiLCJidXR0b25MaWtlIiwicGhvdG9MaW5rQ2FyZCIsImNhcmRDb3VudExpa2UiLCJpIiwibGVuZ3RoIiwiX3NldENsYXNzTGlrZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX3JlbW92ZUxpa2UiLCJfYWRkTGlrZSIsIl9kZWxldGVDYXJkIiwiYmluZCIsInRoZW4iLCJyIiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwidG9nZ2xlIiwiX2RlbGV0ZURvbUNhcmQiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9jb25maWciLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImVycm9yQ2xhc3MiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwic2VsZWN0b3JQb3B1cCIsIl9wb3B1cCIsIl9idXR0b25DbG9zZSIsIl9oYW5kbGVFc2NDbG9zZWJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9idXR0b25TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0Iiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwicmVzZXQiLCJhcGkiLCJiYXNlVVJMIiwiaGVhZGVycyIsImZldGNoIiwiX3VybENhcmQiLCJtZXRob2QiLCJfaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzIiwiX2dldFJlc3BvbnNlRGF0YSIsIl9iYXNlVVJMIiwiX3VybERhdGFQcm9maWxlIiwiX3VybEF2YXRhciIsImdldERhdGFQcm9maWxlIiwiZ2V0RGF0YUNhcmQiLCJzZW5kRGF0YVByb2ZpbGUiLCJzZW5kRGF0YUF2YXRhciIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiYXV0aG9yaXphdGlvbiIsImNhcmRMaXN0IiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmRJdGVtIiwicHJlcGVuZCIsImNsZWFyIiwiaW5uZXJIVE1MIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIl9yZW5kZXJlZEl0ZW1zIiwiaXRlbSIsImNhcmRFbGVtZW50IiwicG9wdXBFZGl0IiwiYnV0dG9uU3VibWl0IiwicmVuZGVyTG9hZGluZyIsInVzZXJEYXRhIiwic2V0VXNlckluZm8iLCJhYm91dCIsInBvcHVwQWRkIiwicG9zdENhcmQiLCJwb3B1cEltYWdlIiwiX3BvcHVwQmlnUGhvdG8iLCJfcG9wdXBQaG90b1N1YnRpdGxlIiwiZGVsZXRlQ2FyZCIsInBvcHVwVXBkYXRlQXZhdGFyIiwic2V0VXNlckF2YXRhciIsIm5hbWVTZWxlY3RvciIsInN0YXR1c1NlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdXNlckluZm9ybWF0aW9uIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVTdGF0dXMiLCJfcHJvZmlsZUF2YXRhciIsImdldFVzZXJJbmZvIiwiX2Fib3V0IiwiaW5mbyIsInNhdmVTZXJ2ZXJJbmZvcm1hdGlvbiIsInVzZXJJbmZvcm1hdGlvbiIsImlucHV0TmFtZSIsImlucHV0U3RhdHVzIiwiYXZhdGFyTGluayIsImdldEZ1bGxQYWNrSW5mb09iaiIsInVybCIsImlzTG9hZGluZyIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJhbGwiLCJpdGVtc1VzZXJEYXRhIiwiaXRlbXNDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==