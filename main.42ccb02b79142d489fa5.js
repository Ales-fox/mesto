!function(){"use strict";const t=document.querySelector(".profile"),e=t.querySelector(".button-edit"),s=t.querySelector(".button-add"),i=t.querySelector(".profile__avatar-hover"),r={};class n{constructor(t,e,s,i,r,n,o){this._name=t.name,this._link=t.link,this._id=t._id,this._likes=t.likes,this._ownerId=t.owner._id,this._cardSelector=e,this._handleCardClick=s,this._deleteLikes=i,this._putLikes=r,this._popupDelete=n,this._myId=o()._id,this._myName=o().name}createCard(){this._newCard=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._buttonDelete=this._newCard.querySelector(".button-delete"),this._ownerId!==this._myId&&this._buttonDelete.classList.add("button-delete_inactive"),this.titleCard=this._newCard.querySelector(".card__title"),this.buttonLike=this._newCard.querySelector(".button-like"),this.photoLinkCard=this._newCard.querySelector(".card__photo"),this.cardCountLike=this._newCard.querySelector(".card__count-like");for(let t=0;t<this._likes.length;t++)if(this._likes[t].name===this._myName){this._setClassLike();break}return this._setEventListeners(),this.titleCard.textContent=this._name,this.photoLinkCard.src=this._link,this.photoLinkCard.alt=this._name,this.cardCountLike.textContent=this._likes.length,this._newCard}_setEventListeners(){this._newCard.querySelector(".button-like").addEventListener("click",(()=>{this.buttonLike.classList.contains("button-like_active")?this._removeLike():this._addLike()})),this._buttonDelete.classList.contains("button-delete_inactive")||this._buttonDelete.addEventListener("click",(()=>{this._popupDelete(this._deleteCard.bind(this),this._id)})),this.photoLinkCard.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_addLike(){this._putLikes(this._id).then((t=>{this._setClassLike(),this.cardCountLike.textContent=t.likes.length})).catch((t=>console.error(t)))}_removeLike(){this._deleteLikes(this._id).then((t=>{this._setClassLike(),this.cardCountLike.textContent=t.likes.length})).catch((t=>console.error(t)))}_setClassLike(){this.buttonLike.classList.toggle("button-like_active")}_deleteCard(){this._deleteDomCard(),this._newCard=null}_deleteDomCard(){this._newCard.remove()}}class o{constructor(t,e){this._config=t,this._form=e,this._inputList=Array.from(this._form.querySelectorAll("".concat(this._config.inputSelector))),this._buttonElement=this._form.querySelector("".concat(this._config.submitButtonSelector))}enableValidation(){this._setEventListeners()}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_showInputError(t,e){const s=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.add(this._config.inputErrorClass),s.textContent=e,s.classList.add("".concat(this._config.errorClass,"_active"))}_hideInputError(t){const e=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.remove(this._config.inputErrorClass),e.classList.remove("".concat(this._config.errorClass,"_active")),e.textContent=""}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}}class a{constructor(t){this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".button-close"),this._handleEscClosebind=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClosebind)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClosebind)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._buttonClose.addEventListener("click",this.close.bind(this)),this._popup.addEventListener("mousedown",(t=>{t.target===t.currentTarget&&this.close()}))}}class h extends a{constructor(t,e){super(t),this.handleFormSubmit=e,this._buttonSubmit=this._popup.querySelector(".button-submit"),this._inputList=this._popup.querySelectorAll(".input"),this.setEventListeners()}_getInputValues(){return this.formValues={},this._inputList.forEach((t=>{this.formValues[t.name]=t.value})),this.formValues}setEventListeners(){this._form=this._popup.querySelector(".popup__container"),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this._getInputValues(),this._buttonSubmit)})),super.setEventListeners()}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}close(){this._form.reset(),super.close()}}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const l=new class{constructor(t){let{baseURL:e,headers:s}=t;c(this,"postCard",(t=>fetch(this._urlCard,{method:"POST",headers:this._headers,body:JSON.stringify(t)}).then((t=>this._getResponseData(t))))),c(this,"deleteCard",(t=>fetch("".concat(this._urlCard).concat(t),{method:"DELETE",headers:this._headers}).then((t=>this._getResponseData(t))))),c(this,"putLikes",(t=>fetch("".concat(this._urlCard).concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((t=>this._getResponseData(t))))),c(this,"deleteLikes",(t=>fetch("".concat(this._urlCard).concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((t=>this._getResponseData(t))))),this._baseURL=e,this._urlDataProfile="".concat(this._baseURL,"users/me/"),this._urlCard="".concat(this._baseURL,"cards/"),this._urlAvatar="".concat(this._baseURL,"users/me/avatar/"),this._headers=s}getDataProfile(){return fetch(this._urlDataProfile,{headers:this._headers}).then((t=>this._getResponseData(t)))}getDataCard(){return fetch(this._urlCard,{headers:this._headers}).then((t=>this._getResponseData(t)))}sendDataProfile(t){return fetch(this._urlDataProfile,{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then((t=>this._getResponseData(t)))}sendDataAvatar(t){return fetch(this._urlAvatar,{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then((t=>this._getResponseData(t)))}_getResponseData(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status,"  ").concat(t.statusText))}}({baseURL:"https://nomoreparties.co/v1/cohort-46/",headers:{authorization:"13749ec2-245f-4fcd-8f22-451e84bec66b","Content-Type":"application/json"}}),u=new class{constructor(t,e){let{renderer:s}=t;this._renderer=s,this._container=document.querySelector(e)}addItem(t){this._container.append(t)}prependItem(t){this._container.prepend(t)}clear(){this._container.innerHTML=""}renderItems(t){this.clear(),this._renderedItems=t,this._renderedItems.forEach((t=>{this._renderer(t)}))}}({renderer:t=>{const e=C(t);u.addItem(e)}},".cards"),_=new h(".popup_form_edit",(function(t,e){v(!0,e),l.sendDataProfile(t).then((t=>{b.setUserInfo(t.name,t.about),_.close()})).catch((t=>console.error(t))),v(!1,e)})),d=new h(".popup_form_add",(function(t,e){v(!0,e),l.postCard(t).then((t=>{const e=C(t);u.prependItem(e),d.close()})).catch((t=>console.error(t))),v(!1,e)})),p=new class extends a{constructor(t){super(t),this._popupBigPhoto=this._popup.querySelector(".popup__bigPhoto"),this._popupPhotoSubtitle=this._popup.querySelector(".popup__subtitle")}open(t,e){this._popupBigPhoto.alt=t,this._popupBigPhoto.src=e,this._popupPhotoSubtitle.textContent=t,super.open()}}(".popup_photo"),m=new class extends a{constructor(t,e){super(t),this.handleFormSubmit=e,this._setEventListeners()}_setEventListeners(){this._form=this._popup.querySelector(".popup__container"),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this.deleteCard,this.id)})),super.setEventListeners()}open(t,e){super.open(),this.deleteCard=t,this.id=e}}(".popup_form_delete",(function(t,e){l.deleteCard(e).then((()=>{t(),m.close()})).catch((t=>console.error(t)))})),f=new h(".popup_form_updateAvatar",(function(t,e){v(!0,e),l.sendDataAvatar(t).then((t=>{b.setUserAvatar(t.avatar),f.close()})).catch((t=>console.error(t))),v(!1,e)})),b=new class{constructor(t,e,s){var i,r;r=()=>this._userInformation,(i="getFullPackInfoObj")in this?Object.defineProperty(this,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[i]=r,this._profileName=document.querySelector(t),this._profileStatus=document.querySelector(e),this._profileAvatar=document.querySelector(s)}getUserInfo(){return this._name=this._profileName.textContent,this._about=this._profileStatus.textContent,this.info={name:this._name,about:this._about},this.info}saveServerInformation(t){this._userInformation=t}setUserInfo(t,e){this._profileName.textContent=t,this._profileStatus.textContent=e}setUserAvatar(t){this._profileAvatar.src=t}}(".profile__name",".profile__status",".profile__avatar");function C(t){return new n(t,".template__card",L,l.deleteLikes,l.putLikes,m.open.bind(m),b.getFullPackInfoObj).createCard()}function L(t,e){p.open(t,e)}function v(t,e){e.textContent=t?"Cохранение...":"Cохранить"}var k;p.setEventListeners(),k={form:".popup__container",inputSelector:".input",submitButtonSelector:".button-submit",inactiveButtonClass:"button_invalid",inputErrorClass:"input_type_error",errorClass:"input-error"},Array.from(document.querySelectorAll(k.form)).forEach((t=>{const e=new o(k,t),s=t.getAttribute("name");r[s]=e,e.enableValidation()})),Promise.all([l.getDataProfile(),l.getDataCard()]).then((t=>{let[e,s]=t;b.saveServerInformation(e),b.setUserInfo(e.name,e.about),b.setUserAvatar(e.avatar),u.renderItems(s)})),e.addEventListener("click",(function(){_.open(),_.setInputValues(b.getUserInfo())})),s.addEventListener("click",(function(){r.formCard.resetValidation(),d.open()})),i.addEventListener("click",(function(){f.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi40MmNjYjAyYjc5MTQyZDQ4OWZhNS5qcyIsIm1hcHBpbmdzIjoieUJBQUEsTUFBTUEsRUFBVUMsU0FBU0MsY0FBYyxZQUNqQ0MsRUFBYUgsRUFBUUUsY0FBYyxnQkFDbkNFLEVBQVlKLEVBQVFFLGNBQWMsZUFDbENHLEVBQVNMLEVBQVFFLGNBQWMsMEJBZ0IvQkksRUFBaUIsR0NuQlIsTUFBTUMsRUFDakJDLFlBQVlDLEVBQUtDLEVBQWNDLEVBQWlCQyxFQUFhQyxFQUFVQyxFQUFhQyxHQUNoRkMsS0FBS0MsTUFBUVIsRUFBSVMsS0FDakJGLEtBQUtHLE1BQVFWLEVBQUlXLEtBQ2pCSixLQUFLSyxJQUFNWixFQUFJWSxJQUNmTCxLQUFLTSxPQUFTYixFQUFJYyxNQUNsQlAsS0FBS1EsU0FBV2YsRUFBSWdCLE1BQU1KLElBQzFCTCxLQUFLVSxjQUFnQmhCLEVBQ3JCTSxLQUFLVyxpQkFBbUJoQixFQUN4QkssS0FBS1ksYUFBZWhCLEVBQ3BCSSxLQUFLYSxVQUFZaEIsRUFDakJHLEtBQUtjLGFBQWVoQixFQUNwQkUsS0FBS2UsTUFBUWhCLElBQWtCTSxJQUMvQkwsS0FBS2dCLFFBQVVqQixJQUFrQkcsS0FHckNlLGFBQ0lqQixLQUFLa0IsU0FBV2pDLFNBQ1hDLGNBQWNjLEtBQUtVLGVBQ25CUyxRQUNBakMsY0FBYyxTQUNka0MsV0FBVSxHQUdmcEIsS0FBS3FCLGNBQWdCckIsS0FBS2tCLFNBQVNoQyxjQUFjLGtCQUc3Q2MsS0FBS1EsV0FBYVIsS0FBS2UsT0FDdkJmLEtBQUtxQixjQUFjQyxVQUFVQyxJQUFJLDBCQUdyQ3ZCLEtBQUt3QixVQUFZeEIsS0FBS2tCLFNBQVNoQyxjQUFjLGdCQUM3Q2MsS0FBS3lCLFdBQWF6QixLQUFLa0IsU0FBU2hDLGNBQWMsZ0JBQzlDYyxLQUFLMEIsY0FBZ0IxQixLQUFLa0IsU0FBU2hDLGNBQWMsZ0JBQ2pEYyxLQUFLMkIsY0FBZ0IzQixLQUFLa0IsU0FBU2hDLGNBQWMscUJBRWpELElBQUssSUFBSTBDLEVBQUksRUFBR0EsRUFBSTVCLEtBQUtNLE9BQU91QixPQUFRRCxJQUNwQyxHQUFJNUIsS0FBS00sT0FBT3NCLEdBQUcxQixPQUFTRixLQUFLZ0IsUUFBUyxDQUN0Q2hCLEtBQUs4QixnQkFDTCxNQVdSLE9BUEE5QixLQUFLK0IscUJBRUwvQixLQUFLd0IsVUFBVVEsWUFBY2hDLEtBQUtDLE1BQ2xDRCxLQUFLMEIsY0FBY08sSUFBTWpDLEtBQUtHLE1BQzlCSCxLQUFLMEIsY0FBY1EsSUFBTWxDLEtBQUtDLE1BQzlCRCxLQUFLMkIsY0FBY0ssWUFBY2hDLEtBQUtNLE9BQU91QixPQUV0QzdCLEtBQUtrQixTQUloQmEscUJBQ0kvQixLQUFLa0IsU0FBU2hDLGNBQWMsZ0JBQWdCaUQsaUJBQWlCLFNBQVMsS0FDN0RuQyxLQUFLeUIsV0FBV0gsVUFBVWMsU0FBUyxzQkFHcENwQyxLQUFLcUMsY0FGTHJDLEtBQUtzQyxjQU1SdEMsS0FBS3FCLGNBQWNDLFVBQVVjLFNBQVMsMkJBQ3ZDcEMsS0FBS3FCLGNBQWNjLGlCQUFpQixTQUFTLEtBQVFuQyxLQUFLYyxhQUFhZCxLQUFLdUMsWUFBWUMsS0FBS3hDLE1BQU9BLEtBQUtLLFFBRzdHTCxLQUFLMEIsY0FBY1MsaUJBQWlCLFNBQVMsS0FDekNuQyxLQUFLVyxpQkFBaUJYLEtBQUtDLE1BQU9ELEtBQUtHLFVBSS9DbUMsV0FDSXRDLEtBQUthLFVBQVViLEtBQUtLLEtBQUtvQyxNQUFNQyxJQUMzQjFDLEtBQUs4QixnQkFDTDlCLEtBQUsyQixjQUFjSyxZQUFjVSxFQUFFbkMsTUFBTXNCLFVBQzFDYyxPQUFNQyxHQUFLQyxRQUFRQyxNQUFNRixLQUdoQ1AsY0FDSXJDLEtBQUtZLGFBQWFaLEtBQUtLLEtBQUtvQyxNQUFNQyxJQUM5QjFDLEtBQUs4QixnQkFDTDlCLEtBQUsyQixjQUFjSyxZQUFjVSxFQUFFbkMsTUFBTXNCLFVBQzFDYyxPQUFNQyxHQUFLQyxRQUFRQyxNQUFNRixLQUdoQ2QsZ0JBQ0k5QixLQUFLeUIsV0FBV0gsVUFBVXlCLE9BQU8sc0JBR3JDUixjQUNJdkMsS0FBS2dELGlCQUNMaEQsS0FBS2tCLFNBQVcsS0FHcEI4QixpQkFDSWhELEtBQUtrQixTQUFTK0IsVUNoR1AsTUFBTUMsRUFDakIxRCxZQUFZMkQsRUFBUUMsR0FDaEJwRCxLQUFLcUQsUUFBVUYsRUFDZm5ELEtBQUtzRCxNQUFRRixFQUNicEQsS0FBS3VELFdBQWFDLE1BQU1DLEtBQUt6RCxLQUFLc0QsTUFBTUksaUJBQVgsVUFBK0IxRCxLQUFLcUQsUUFBUU0saUJBQ3pFM0QsS0FBSzRELGVBQWlCNUQsS0FBS3NELE1BQU1wRSxjQUFYLFVBQTRCYyxLQUFLcUQsUUFBUVEsdUJBSW5FQyxtQkFDSTlELEtBQUsrQixxQkFHVEEscUJBRUkvQixLQUFLK0QscUJBRUwvRCxLQUFLdUQsV0FBV1MsU0FBU0MsSUFDckJBLEVBQWE5QixpQkFBaUIsU0FBUyxLQUNuQ25DLEtBQUtrRSxvQkFBb0JELEdBRXpCakUsS0FBSytELDJCQU1qQkEscUJBQ1EvRCxLQUFLbUUsb0JBQ0xuRSxLQUFLNEQsZUFBZXRDLFVBQVVDLElBQUl2QixLQUFLcUQsUUFBUWUscUJBQy9DcEUsS0FBSzRELGVBQWVTLFVBQVcsSUFFL0JyRSxLQUFLNEQsZUFBZXRDLFVBQVUyQixPQUFPakQsS0FBS3FELFFBQVFlLHFCQUNsRHBFLEtBQUs0RCxlQUFlUyxVQUFXLEdBSXZDRixtQkFDSSxPQUFPbkUsS0FBS3VELFdBQVdlLE1BQU1MLElBQ2pCQSxFQUFhTSxTQUFTQyxRQUl0Q04sb0JBQW9CRCxHQUNYQSxFQUFhTSxTQUFTQyxNQUd2QnhFLEtBQUt5RSxnQkFBZ0JSLEdBRnJCakUsS0FBSzBFLGdCQUFnQlQsRUFBY0EsRUFBYVUsbUJBTXhERCxnQkFBZ0JULEVBQWNXLEdBQzFCLE1BQU1DLEVBQWU3RSxLQUFLc0QsTUFBTXBFLGNBQVgsV0FBNkJjLEtBQUtxRCxRQUFReUIsV0FBMUMsWUFBd0RiLEVBQWFjLEtBQzFGZCxFQUFhM0MsVUFBVUMsSUFBSXZCLEtBQUtxRCxRQUFRMkIsaUJBQ3hDSCxFQUFhN0MsWUFBYzRDLEVBQzNCQyxFQUFhdkQsVUFBVUMsSUFBdkIsVUFBOEJ2QixLQUFLcUQsUUFBUXlCLFdBQTNDLFlBR0pMLGdCQUFnQlIsR0FDWixNQUFNWSxFQUFlN0UsS0FBS3NELE1BQU1wRSxjQUFYLFdBQTZCYyxLQUFLcUQsUUFBUXlCLFdBQTFDLFlBQXdEYixFQUFhYyxLQUMxRmQsRUFBYTNDLFVBQVUyQixPQUFPakQsS0FBS3FELFFBQVEyQixpQkFDM0NILEVBQWF2RCxVQUFVMkIsT0FBdkIsVUFBaUNqRCxLQUFLcUQsUUFBUXlCLFdBQTlDLFlBQ0FELEVBQWE3QyxZQUFjLEdBRy9CaUQsa0JBQ0lqRixLQUFLK0QscUJBQ0wvRCxLQUFLdUQsV0FBV1MsU0FBU0MsSUFDckJqRSxLQUFLeUUsZ0JBQWdCUixPQ3BFbEIsTUFBTWlCLEVBQ2pCMUYsWUFBWTJGLEdBQ1JuRixLQUFLb0YsT0FBU25HLFNBQVNDLGNBQWNpRyxHQUNyQ25GLEtBQUtxRixhQUFlckYsS0FBS29GLE9BQU9sRyxjQUFjLGlCQUM5Q2MsS0FBS3NGLG9CQUFzQnRGLEtBQUt1RixnQkFBZ0IvQyxLQUFLeEMsTUFHekR3RixPQUNJeEYsS0FBS29GLE9BQU85RCxVQUFVQyxJQUFJLGdCQUMxQnRDLFNBQVNrRCxpQkFBaUIsVUFBV25DLEtBQUtzRixxQkFHOUNHLFFBQ0l6RixLQUFLb0YsT0FBTzlELFVBQVUyQixPQUFPLGdCQUM3QmhFLFNBQVN5RyxvQkFBb0IsVUFBVzFGLEtBQUtzRixxQkFHakRDLGdCQUFnQkksR0FDSSxXQUFaQSxFQUFJQyxLQUNKNUYsS0FBS3lGLFFBSWJJLG9CQUVJN0YsS0FBS3FGLGFBQWFsRCxpQkFBaUIsUUFBU25DLEtBQUt5RixNQUFNakQsS0FBS3hDLE9BRTVEQSxLQUFLb0YsT0FBT2pELGlCQUFpQixhQUFjd0QsSUFDbkNBLEVBQUlHLFNBQVdILEVBQUlJLGVBQ25CL0YsS0FBS3lGLFlDM0JOLE1BQU1PLFVBQXNCZCxFQUN2QzFGLFlBQVkyRixFQUFlYyxHQUN2QkMsTUFBTWYsR0FDTm5GLEtBQUtpRyxpQkFBbUJBLEVBQ3hCakcsS0FBS21HLGNBQWdCbkcsS0FBS29GLE9BQU9sRyxjQUFjLGtCQUMvQ2MsS0FBS3VELFdBQWF2RCxLQUFLb0YsT0FBTzFCLGlCQUFpQixVQUMvQzFELEtBQUs2RixvQkFHVE8sa0JBS0ksT0FKQXBHLEtBQUtxRyxXQUFhLEdBQ2xCckcsS0FBS3VELFdBQVdTLFNBQVFzQyxJQUNwQnRHLEtBQUtxRyxXQUFXQyxFQUFNcEcsTUFBUW9HLEVBQU1DLFNBRWpDdkcsS0FBS3FHLFdBR2hCUixvQkFDSTdGLEtBQUtzRCxNQUFRdEQsS0FBS29GLE9BQU9sRyxjQUFjLHFCQUN2Q2MsS0FBS3NELE1BQU1uQixpQkFBaUIsVUFBV3dELElBQ25DQSxFQUFJYSxpQkFFSnhHLEtBQUtpRyxpQkFBaUJqRyxLQUFLb0csa0JBQW1CcEcsS0FBS21HLGtCQUV2REQsTUFBTUwsb0JBR1ZZLGVBQWVDLEdBQ1gxRyxLQUFLdUQsV0FBV1MsU0FBU3NDLElBRXJCQSxFQUFNQyxNQUFRRyxFQUFLSixFQUFNcEcsU0FJakN1RixRQUNJekYsS0FBS3NELE1BQU1xRCxRQUNYVCxNQUFNVCxTLHdIQzFCZCxNQUFNbUIsRUFBTSxJQ1pHLE1BQ1hwSCxZQUFZLEdBQXNCLElBQXRCLFFBQUVxSCxFQUFGLFFBQVdDLEdBQVcscUJBb0N0QnJILEdBQ0RzSCxNQUFNL0csS0FBS2dILFNBQVUsQ0FDeEJDLE9BQVEsT0FDUkgsUUFBUzlHLEtBQUtrSCxTQUNkQyxLQUFNQyxLQUFLQyxVQUFVNUgsS0FDdEJnRCxNQUFLNkUsR0FBT3RILEtBQUt1SCxpQkFBaUJELE9BekNQLHFCQThDcEJ2QyxHQUNIZ0MsTUFBTSxHQUFELE9BQUkvRyxLQUFLZ0gsVUFBVCxPQUFvQmpDLEdBQU0sQ0FDbENrQyxPQUFRLFNBQ1JILFFBQVM5RyxLQUFLa0gsV0FDZnpFLE1BQUs2RSxHQUFPdEgsS0FBS3VILGlCQUFpQkQsT0FsRFAsbUJBc0R0QnZDLEdBQ0RnQyxNQUFNLEdBQUQsT0FBSS9HLEtBQUtnSCxVQUFULE9BQW9CakMsRUFBcEIsVUFBZ0MsQ0FDeENrQyxPQUFRLE1BQ1JILFFBQVM5RyxLQUFLa0gsV0FDZnpFLE1BQUs2RSxHQUFPdEgsS0FBS3VILGlCQUFpQkQsT0ExRFAsc0JBNkRuQnZDLEdBQ0pnQyxNQUFNLEdBQUQsT0FBSS9HLEtBQUtnSCxVQUFULE9BQW9CakMsRUFBcEIsVUFBZ0MsQ0FDeENrQyxPQUFRLFNBQ1JILFFBQVM5RyxLQUFLa0gsV0FDZnpFLE1BQUs2RSxHQUFPdEgsS0FBS3VILGlCQUFpQkQsT0FoRXJDdEgsS0FBS3dILFNBQVdYLEVBQ2hCN0csS0FBS3lILGdCQUFMLFVBQTBCekgsS0FBS3dILFNBQS9CLGFBQ0F4SCxLQUFLZ0gsU0FBTCxVQUFtQmhILEtBQUt3SCxTQUF4QixVQUNBeEgsS0FBSzBILFdBQUwsVUFBcUIxSCxLQUFLd0gsU0FBMUIsb0JBQ0F4SCxLQUFLa0gsU0FBV0osRUFHcEJhLGlCQUNJLE9BQU9aLE1BQU0vRyxLQUFLeUgsZ0JBQWlCLENBQy9CWCxRQUFTOUcsS0FBS2tILFdBQ2Z6RSxNQUFLNkUsR0FBT3RILEtBQUt1SCxpQkFBaUJELEtBR3pDTSxjQUNJLE9BQU9iLE1BQU0vRyxLQUFLZ0gsU0FBVSxDQUN4QkYsUUFBUzlHLEtBQUtrSCxXQUNmekUsTUFBSzZFLEdBQU90SCxLQUFLdUgsaUJBQWlCRCxLQUd6Q08sZ0JBQWdCcEksR0FDWixPQUFPc0gsTUFBTS9HLEtBQUt5SCxnQkFBaUIsQ0FDL0JSLE9BQVEsUUFDUkgsUUFBUzlHLEtBQUtrSCxTQUNkQyxLQUFNQyxLQUFLQyxVQUFVNUgsS0FDdEJnRCxNQUFLNkUsR0FBT3RILEtBQUt1SCxpQkFBaUJELEtBR3pDUSxlQUFlckksR0FDWCxPQUFPc0gsTUFBTS9HLEtBQUswSCxXQUFZLENBQzFCVCxPQUFRLFFBQ1JILFFBQVM5RyxLQUFLa0gsU0FDZEMsS0FBTUMsS0FBS0MsVUFBVTVILEtBQ3RCZ0QsTUFBSzZFLEdBQU90SCxLQUFLdUgsaUJBQWlCRCxLQW1DekNDLGlCQUFpQkQsR0FDYixPQUFLQSxFQUFJUyxHQUdGVCxFQUFJVSxPQUZBQyxRQUFRQyxPQUFSLGtCQUEwQlosRUFBSWEsT0FBOUIsYUFBeUNiLEVBQUljLGVOM0RoRCxDQUNadkIsUUFBUyx5Q0FDVEMsUUFBUyxDQUNMdUIsY0FBZSx1Q0FDZixlQUFnQixzQktIbEJDLEVBQVcsSUViRixNQUNYOUksWUFBWSxFQUFjK0ksR0FBbUIsSUFBakMsU0FBRUMsR0FBK0IsRUFDekN4SSxLQUFLeUksVUFBWUQsRUFDakJ4SSxLQUFLMEksV0FBYXpKLFNBQVNDLGNBQWNxSixHQUc3Q0ksUUFBUUMsR0FDSjVJLEtBQUswSSxXQUFXRyxPQUFPRCxHQUczQkUsWUFBWUYsR0FDUjVJLEtBQUswSSxXQUFXSyxRQUFRSCxHQUc1QkksUUFDSWhKLEtBQUswSSxXQUFXTyxVQUFZLEdBR2hDQyxZQUFZQyxHQUNSbkosS0FBS2dKLFFBQ0xoSixLQUFLb0osZUFBaUJELEVBRXRCbkosS0FBS29KLGVBQWVwRixTQUFRcUYsSUFDeEJySixLQUFLeUksVUFBVVksUUZWRSxDQUN6QmIsU0FBV2EsSUFDUCxNQUFNQyxFQUFjckksRUFBV29JLEdBQy9CZixFQUFTSyxRQUFRVyxLQUV0QixVQUNHQyxFQUFZLElBQUl2RCxFQUFjLG9CQWlEcEMsU0FBaUN2RyxFQUFLK0osR0FDbENDLEdBQWMsRUFBTUQsR0FDcEI1QyxFQUFJaUIsZ0JBQWdCcEksR0FBS2dELE1BQUtoRCxJQUMxQmlLLEVBQVNDLFlBQVlsSyxFQUFJUyxLQUFNVCxFQUFJbUssT0FDbkNMLEVBQVU5RCxXQUNYOUMsT0FBTUMsR0FBS0MsUUFBUUMsTUFBTUYsS0FDNUI2RyxHQUFjLEVBQU9ELE1BdERuQkssRUFBVyxJQUFJN0QsRUFBYyxtQkEwRG5DLFNBQThCdkcsRUFBSytKLEdBQy9CQyxHQUFjLEVBQU1ELEdBQ3BCNUMsRUFBSWtELFNBQVNySyxHQUFLZ0QsTUFBS2hELElBQ25CLE1BQU02SixFQUFjckksRUFBV3hCLEdBQy9CNkksRUFBU1EsWUFBWVEsR0FDckJPLEVBQVNwRSxXQUNWOUMsT0FBTUMsR0FBS0MsUUFBUUMsTUFBTUYsS0FDNUI2RyxHQUFjLEVBQU9ELE1BaEVuQk8sRUFBYSxJR25CSixjQUE2QjdFLEVBQ3hDMUYsWUFBWTJGLEdBQ1JlLE1BQU1mLEdBQ05uRixLQUFLZ0ssZUFBaUJoSyxLQUFLb0YsT0FBT2xHLGNBQWMsb0JBQ2hEYyxLQUFLaUssb0JBQXNCakssS0FBS29GLE9BQU9sRyxjQUFjLG9CQUd6RHNHLEtBQUt0RixFQUFNRSxHQUNQSixLQUFLZ0ssZUFBZTlILElBQU1oQyxFQUMxQkYsS0FBS2dLLGVBQWUvSCxJQUFNN0IsRUFDMUJKLEtBQUtpSyxvQkFBb0JqSSxZQUFjOUIsRUFDdkNnRyxNQUFNVixTSFF3QixnQkFDaEMxRixFQUFjLElJcEJMLGNBQW9Db0YsRUFDL0MxRixZQUFZMkYsRUFBZWMsR0FDdkJDLE1BQU1mLEdBQ05uRixLQUFLaUcsaUJBQW1CQSxFQUN4QmpHLEtBQUsrQixxQkFHVEEscUJBQ0kvQixLQUFLc0QsTUFBUXRELEtBQUtvRixPQUFPbEcsY0FBYyxxQkFDdkNjLEtBQUtzRCxNQUFNbkIsaUJBQWlCLFVBQVd3RCxJQUNuQ0EsRUFBSWEsaUJBRUp4RyxLQUFLaUcsaUJBQWlCakcsS0FBS2tLLFdBQVlsSyxLQUFLK0UsT0FHaERtQixNQUFNTCxvQkFHVkwsS0FBSzBFLEVBQVluRixHQUNibUIsTUFBTVYsT0FDTnhGLEtBQUtrSyxXQUFhQSxFQUNsQmxLLEtBQUsrRSxHQUFLQSxJSkQ0QixzQkFrRTlDLFNBQWdDbUYsRUFBWW5GLEdBQ3hDNkIsRUFBSXNELFdBQVduRixHQUFJdEMsTUFBSyxLQUNwQnlILElBQ0FwSyxFQUFZMkYsV0FDYjlDLE9BQU1DLEdBQUtDLFFBQVFDLE1BQU1GLFFBckUxQnVILEVBQW9CLElBQUluRSxFQUFjLDRCQXlFNUMsU0FBZ0N2RyxFQUFLK0osR0FDakNDLEdBQWMsRUFBTUQsR0FDcEI1QyxFQUFJa0IsZUFBZXJJLEdBQUtnRCxNQUFLaEQsSUFDekJpSyxFQUFTVSxjQUFjM0ssRUFBSUosUUFDM0I4SyxFQUFrQjFFLFdBQ25COUMsT0FBTUMsR0FBS0MsUUFBUUMsTUFBTUYsS0FDNUI2RyxHQUFjLEVBQU9ELE1BOUVuQkUsRUFBVyxJS3hCRixNQUNYbEssWUFBWTZLLEVBQWNDLEVBQWdCQyxHLFVBa0JyQixJQUNWdkssS0FBS3dLLGtCLEVBbkIwQyw2QixzQkFBQSxLLHVEQUFBLEssS0FDdER4SyxLQUFLeUssYUFBZXhMLFNBQVNDLGNBQWNtTCxHQUMzQ3JLLEtBQUswSyxlQUFpQnpMLFNBQVNDLGNBQWNvTCxHQUM3Q3RLLEtBQUsySyxlQUFpQjFMLFNBQVNDLGNBQWNxTCxHQUdqREssY0FTSSxPQVJBNUssS0FBS0MsTUFBUUQsS0FBS3lLLGFBQWF6SSxZQUMvQmhDLEtBQUs2SyxPQUFTN0ssS0FBSzBLLGVBQWUxSSxZQUVsQ2hDLEtBQUs4SyxLQUFPLENBQ1I1SyxLQUFNRixLQUFLQyxNQUNYMkosTUFBTzVKLEtBQUs2SyxRQUdUN0ssS0FBSzhLLEtBT2hCQyxzQkFBc0JDLEdBQ2xCaEwsS0FBS3dLLGlCQUFtQlEsRUFHNUJyQixZQUFZc0IsRUFBV0MsR0FDbkJsTCxLQUFLeUssYUFBYXpJLFlBQWNpSixFQUNoQ2pMLEtBQUswSyxlQUFlMUksWUFBY2tKLEVBR3RDZCxjQUFjZSxHQUNWbkwsS0FBSzJLLGVBQWUxSSxJQUFNa0osSUxUSixpQkFBa0IsbUJBQW9CLG9CQStCcEUsU0FBU2xLLEVBQVd4QixHQUtoQixPQUhnQixJQUFJRixFQUFLRSxFQUFLLGtCQUFtQkUsRUFBaUJpSCxFQUFJaEgsWUFBYWdILEVBQUkvRyxTQUNuRkMsRUFBWTBGLEtBQUtoRCxLQUFLMUMsR0FBYzRKLEVBQVMwQixvQkFDckJuSyxhQUloQyxTQUFTdEIsRUFBZ0JPLEVBQU1tTCxHQUMzQnRCLEVBQVd2RSxLQUFLdEYsRUFBTW1MLEdBeUMxQixTQUFTNUIsRUFBYzZCLEVBQVc5QixHQUUxQkEsRUFBYXhILFlBRGJzSixFQUMyQixnQkFFQSxZQWhGVG5JLE1BSDFCNEcsRUFBV2xFLG9CQUdlMUMsRUx6QlgsQ0FDWEMsS0FBTSxvQkFDTk8sY0FBZSxTQUNmRSxxQkFBc0IsaUJBQ3RCTyxvQkFBcUIsaUJBQ3JCWSxnQkFBaUIsbUJBQ2pCRixXQUFZLGVLb0JLdEIsTUFBTUMsS0FBS3hFLFNBQVN5RSxpQkFBaUJQLEVBQU9DLE9BQ3BEWSxTQUFTdUgsSUFDZCxNQUFNQyxFQUFZLElBQUl0SSxFQUFjQyxFQUFRb0ksR0FFdENFLEVBQVdGLEVBQVlHLGFBQWEsUUFHMUNwTSxFQUFlbU0sR0FBWUQsRUFDM0JBLEVBQVUxSCxzQkFPbEJtRSxRQUFRMEQsSUFBSSxDQUFDL0UsRUFBSWUsaUJBQWtCZixFQUFJZ0IsZ0JBQ2xDbkYsTUFBSyxJQUFnQyxJQUE5Qm1KLEVBQWVDLEdBQWUsRUFDbENuQyxFQUFTcUIsc0JBQXNCYSxHQUMvQmxDLEVBQVNDLFlBQVlpQyxFQUFjMUwsS0FBTTBMLEVBQWNoQyxPQUN2REYsRUFBU1UsY0FBY3dCLEVBQWN2TSxRQUVyQ2lKLEVBQVNZLFlBQVkyQyxNQStEN0IxTSxFQUFXZ0QsaUJBQWlCLFNBQVMsV0FDakNvSCxFQUFVL0QsT0FDVitELEVBQVU5QyxlQUFlaUQsRUFBU2tCLGtCQUV0Q3hMLEVBQVUrQyxpQkFBaUIsU0FBUyxXQUNoQzdDLEVBQUFBLFNBQUFBLGtCQUNBdUssRUFBU3JFLFVBRWJuRyxFQUFPOEMsaUJBQWlCLFNBQVMsV0FDN0JnSSxFQUFrQjNFLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9NZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vTWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL01lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL01lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vTWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9NZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xyXG5jb25zdCBidXR0b25FZGl0ID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWVkaXQnKTtcclxuY29uc3QgYnV0dG9uQWRkID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWFkZCcpO1xyXG5jb25zdCBhdmF0YXIgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItaG92ZXInKTtcclxuY29uc3QgY29uZmlnID0ge1xyXG4gICAgZm9ybTogJy5wb3B1cF9fY29udGFpbmVyJyxcclxuICAgIGlucHV0U2VsZWN0b3I6ICcuaW5wdXQnLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuYnV0dG9uLXN1Ym1pdCcsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2ludmFsaWQnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAnaW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAnaW5wdXQtZXJyb3InXHJcbn07XHJcbmNvbnN0IGFwaURhdGEgPSB7XHJcbiAgICBiYXNlVVJMOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00Ni8nLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246ICcxMzc0OWVjMi0yNDVmLTRmY2QtOGYyMi00NTFlODRiZWM2NmInLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxufTtcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbmV4cG9ydCB7IGJ1dHRvbkVkaXQsIGJ1dHRvbkFkZCwgY29uZmlnLCBmb3JtVmFsaWRhdG9ycywgYXZhdGFyLCBhcGlEYXRhIH07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvYmosIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBkZWxldGVMaWtlcywgcHV0TGlrZXMsIHBvcHVwRGVsZXRlLCBmdWxsUGFja0luZm9PYmopIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gb2JqLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IG9iai5saW5rO1xyXG4gICAgICAgIHRoaXMuX2lkID0gb2JqLl9pZDtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IG9iai5saWtlcztcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gb2JqLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUxpa2VzID0gZGVsZXRlTGlrZXM7XHJcbiAgICAgICAgdGhpcy5fcHV0TGlrZXMgPSBwdXRMaWtlcztcclxuICAgICAgICB0aGlzLl9wb3B1cERlbGV0ZSA9IHBvcHVwRGVsZXRlO1xyXG4gICAgICAgIHRoaXMuX215SWQgPSBmdWxsUGFja0luZm9PYmooKS5faWQ7XHJcbiAgICAgICAgdGhpcy5fbXlOYW1lID0gZnVsbFBhY2tJbmZvT2JqKCkubmFtZTtcclxuICAgIH1cclxuICAgIC8q0KHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4Ki9cclxuICAgIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fbmV3Q2FyZCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1kZWxldGUnKTtcclxuXHJcbiAgICAgICAgLy/QldGB0LvQuCBJZCDQstC70LDQtNC10LvRjNGG0LAg0LrQsNGA0YLQvtGH0LrQuCDQvdC1INGB0L7QstC/0LDQtNCw0LXRgiDRgSDQvNC+0LjQvCBJZCwg0YLQviDQutC90L7Qv9C60LUgZGVsZXRlINC00L7QsdCw0LLQu9GP0Y4g0LrQu9Cw0YHRgSBcItC90LXQstC40LTQuNC80L7RgdGC0LhcIlxyXG4gICAgICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl9teUlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5jbGFzc0xpc3QuYWRkKCdidXR0b24tZGVsZXRlX2luYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRpdGxlQ2FyZCA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJyk7XHJcbiAgICAgICAgdGhpcy5idXR0b25MaWtlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWxpa2UnKTtcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19waG90bycpO1xyXG4gICAgICAgIHRoaXMuY2FyZENvdW50TGlrZSA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2NvdW50LWxpa2UnKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saWtlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGlrZXNbaV0ubmFtZSA9PT0gdGhpcy5fbXlOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRDbGFzc0xpa2UoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGVDYXJkLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLmNhcmRDb3VudExpa2UudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9uZXdDYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIC8q0KPRgdGC0LDQvdC+0LLQutCwINGB0LvRg9GI0LDRgtC10LvQtdC5Ki9cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoJ2J1dHRvbi1saWtlX2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRMaWtlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVMaWtlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9idXR0b25EZWxldGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXR0b24tZGVsZXRlX2luYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9wb3B1cERlbGV0ZSh0aGlzLl9kZWxldGVDYXJkLmJpbmQodGhpcyksIHRoaXMuX2lkKSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGhvdG9MaW5rQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspOyAvKtCh0YLRgNC10LvQvtGH0L3QsNGPINGE0YPQvdC60YbQuNGPLNGH0YLQvtCx0Ysg0L/RgNC40L3QuNC80LDQu9CwINCy0LXRgNC90YvQuSB0aGlzLiDQotCw0Log0LbQtSDQvNC+0LbQvdC+INC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDQvNC10YLQvtC0IGJpbmQoKSovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZExpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcHV0TGlrZXModGhpcy5faWQpLnRoZW4oKHIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0Q2xhc3NMaWtlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZENvdW50TGlrZS50ZXh0Q29udGVudCA9IHIubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbW92ZUxpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlTGlrZXModGhpcy5faWQpLnRoZW4oKHIpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0Q2xhc3NMaWtlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZENvdW50TGlrZS50ZXh0Q29udGVudCA9IHIubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldENsYXNzTGlrZSgpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnYnV0dG9uLWxpa2VfYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlRG9tQ2FyZCgpO1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9kZWxldGVEb21DYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmQucmVtb3ZlKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChgJHt0aGlzLl9jb25maWcuaW5wdXRTZWxlY3Rvcn1gKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3J9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyrQktC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YsqL1xyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvLyDRh9GC0L7QsdGLINC/0YDQvtCy0LXRgNC40YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4INCyINGB0LDQvNC+0Lwg0L3QsNGH0LDQu9C1XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIC8vINGH0YLQvtCx0Ysg0L/RgNC+0LLQtdGA0Y/RgtGMINC10LPQviDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC70Y7QsdC+0LPQviDQuNC3INC/0L7Qu9C10LlcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2NvbmZpZy5lcnJvckNsYXNzfV8ke2lucHV0RWxlbWVudC5pZH1gKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5fY29uZmlnLmVycm9yQ2xhc3N9X2FjdGl2ZWApO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9jb25maWcuZXJyb3JDbGFzc31fJHtpbnB1dEVsZW1lbnQuaWR9YCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYCR7dGhpcy5fY29uZmlnLmVycm9yQ2xhc3N9X2FjdGl2ZWApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JQb3B1cCk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWNsb3NlJyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2ViaW5kID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZWJpbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZWJpbmQpO1xyXG4gICAgfVxyXG4gICAgLyrQl9Cw0LrRgNGL0YLQuNC1IHBvcHVwINC60LvQsNCy0LjRiNC10LkgRXNjKi9cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLyrQo9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9GPINC90LAg0LrQvdC+0L/QutGDIENsb3NlKi9cclxuICAgICAgICB0aGlzLl9idXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLyrQo9GB0YLQsNC90L7QstC60LAg0YHQu9GD0YjQsNGC0LXQu9GPINC90LAgT3ZlcmxheSovXHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1zdWJtaXQnKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQnKVxyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtVmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtVmFsdWVzXHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCksIHRoaXMuX2J1dHRvblN1Ym1pdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIC8vINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBgdmFsdWVgINC40L3Qv9GD0YLQsCDQtNCw0L3QvdGL0LUg0LjQtyDQvtCx0YrQtdC60YLQsCDQv9C+INCw0YLRgNC40LHRg9GC0YMgYG5hbWVgINGN0YLQvtCz0L4g0LjQvdC/0YPRgtCwXHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7LyrQntGH0LjRgdGC0LrQsCDRhNC+0YDQvNGLKi9cclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcydcclxuXHJcbmltcG9ydCB7IGJ1dHRvbkVkaXQsIGJ1dHRvbkFkZCwgY29uZmlnLCBmb3JtVmFsaWRhdG9ycywgYXZhdGFyLCBhcGlEYXRhIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJ1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnXHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcydcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnXHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnXHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaURhdGEpO1xyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH1cclxufSwgJy5jYXJkcycpO1xyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fZWRpdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fYWRkJywgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfcGhvdG8nKTtcclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfZm9ybV9kZWxldGUnLCBoYW5kbGVEZWxldGVDYXJkU3VibWl0KTtcclxuY29uc3QgcG9wdXBVcGRhdGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fdXBkYXRlQXZhdGFyJywgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IHVzZXJEYXRhID0gbmV3IFVzZXJJbmZvKCcucHJvZmlsZV9fbmFtZScsICcucHJvZmlsZV9fc3RhdHVzJywgJy5wcm9maWxlX19hdmF0YXInKTtcclxuXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtKSlcclxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudClcclxuICAgICAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQuNC3INCw0YLRgNC40LHRg9GC0LAgYG5hbWVgINGDINGE0L7RgNC80YtcclxuICAgICAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpXHJcblxyXG4gICAgICAgIC8vINCy0L7RgiDRgtGD0YIg0LIg0L7QsdGK0LXQutGCINC30LDQv9C40YHRi9Cy0LDQtdC8INC/0L7QtCDQuNC80LXQvdC10Lwg0YTQvtGA0LzRi1xyXG4gICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcblxyXG4vL9Cf0LXRgNCy0L7QvdCw0YfQsNC70YzQvdCw0Y8g0LfQsNCz0YDRg9C30LrQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0Lgg0YEg0YHQtdGA0LLQtdGA0LAg0Lgg0L/QvtC70YPRh9C10L3QuNC1INC90LDRh9Cw0LvRjNC90YvRhSDQutCw0YDRgtC+0YfQtdC6XHJcblByb21pc2UuYWxsKFthcGkuZ2V0RGF0YVByb2ZpbGUoKSwgYXBpLmdldERhdGFDYXJkKCldKVxyXG4gICAgLnRoZW4oKFtpdGVtc1VzZXJEYXRhLCBpdGVtc0NhcmRdKSA9PiB7XHJcbiAgICAgICAgdXNlckRhdGEuc2F2ZVNlcnZlckluZm9ybWF0aW9uKGl0ZW1zVXNlckRhdGEpO1xyXG4gICAgICAgIHVzZXJEYXRhLnNldFVzZXJJbmZvKGl0ZW1zVXNlckRhdGEubmFtZSwgaXRlbXNVc2VyRGF0YS5hYm91dCk7XHJcbiAgICAgICAgdXNlckRhdGEuc2V0VXNlckF2YXRhcihpdGVtc1VzZXJEYXRhLmF2YXRhcik7XHJcbiAgICAgICAgLy/QstGL0LfQvtCyINGA0LXQvdC00LXRgNCwINC90LDRh9Cw0LvRjNC90YvRhSDQutCw0YDRgtC+0YfQtdC6XHJcbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoaXRlbXNDYXJkKTtcclxuICAgIH0pO1xyXG5cclxuLyrQodC+0LfQtNCw0L3QuNC1INC90L7QstGL0YUg0LrQsNGA0YLQvtGH0LXQuiovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQob2JqKSB7XHJcbiAgICAvL9Cn0YLQvtCx0Ysg0L/RgNC4INC/0LXRgNC10LTQsNGH0LUg0LzQtdGC0L7QtNCwINC90LUg0YLQtdGA0Y/Qu9GB0Y8g0LrQvtC90YLQtdC60YHRgiB0aGlzINC80LXRgtC+0LTRiyDQt9Cw0L/QuNGB0LDQvdGLINC60LDQuiDRgdGC0YDQtdC70L7Rh9C90YvQtSDRhNGD0L3QutGG0LjQuFxyXG4gICAgY29uc3QgY2FyZE5ldyA9IG5ldyBDYXJkKG9iaiwgJy50ZW1wbGF0ZV9fY2FyZCcsIGhhbmRsZUNhcmRDbGljaywgYXBpLmRlbGV0ZUxpa2VzLCBhcGkucHV0TGlrZXMsXHJcbiAgICAgICAgcG9wdXBEZWxldGUub3Blbi5iaW5kKHBvcHVwRGVsZXRlKSwgdXNlckRhdGEuZ2V0RnVsbFBhY2tJbmZvT2JqKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZE5ldy5jcmVhdGVDYXJkKCk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIHVybCkge1xyXG4gICAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIHVybCk7XHJcbn1cclxuXHJcbi8q0KHQvtGF0YDQsNC90LXQvdC40LUg0Lgg0L7RgtGB0YvQu9C60LAg0LTQsNC90L3Ri9GFINGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQvdCwINGB0LXRgNCy0LXRgCovXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KG9iaiwgYnV0dG9uU3VibWl0KSB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIGJ1dHRvblN1Ym1pdCk7XHJcbiAgICBhcGkuc2VuZERhdGFQcm9maWxlKG9iaikudGhlbihvYmogPT4ge1xyXG4gICAgICAgIHVzZXJEYXRhLnNldFVzZXJJbmZvKG9iai5uYW1lLCBvYmouYWJvdXQpO1xyXG4gICAgICAgIHBvcHVwRWRpdC5jbG9zZSgpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGJ1dHRvblN1Ym1pdCk7XHJcbn1cclxuXHJcbi8q0KHQvtGF0YDQsNC90LXQvdC40LUg0Lgg0L7RgtGB0YvQu9C60LAg0LTQsNC90L3Ri9GFINC90LAg0YHQtdGA0LLQtdGALCDQsCDRgtCw0Log0LbQtSDQv9C+0YHQu9C10LTRg9GO0YnQtdC1INC00L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCovXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KG9iaiwgYnV0dG9uU3VibWl0KSB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIGJ1dHRvblN1Ym1pdCk7XHJcbiAgICBhcGkucG9zdENhcmQob2JqKS50aGVuKG9iaiA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKG9iaik7XHJcbiAgICAgICAgY2FyZExpc3QucHJlcGVuZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgICB9KS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xyXG4gICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgYnV0dG9uU3VibWl0KTtcclxufVxyXG4vKtCj0LTQsNC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCDRgtC+0LvRjNC60L4g0L/QvtGB0LvQtSDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyovXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQoZGVsZXRlQ2FyZCwgaWQpIHtcclxuICAgIGFwaS5kZWxldGVDYXJkKGlkKS50aGVuKCgpID0+IHtcclxuICAgICAgICBkZWxldGVDYXJkKCk7XHJcbiAgICAgICAgcG9wdXBEZWxldGUuY2xvc2UoKTtcclxuICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbn1cclxuXHJcbi8q0KHQvtGF0YDQsNC90LXQvdC40LUg0LTQsNC90L3Ri9GFINC4INC/0L7RgdC70LXQtNGD0Y7RidCw0Y8g0LfQsNC80LXQvdCwINCw0LLQsNGC0LDRgNCwKi9cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdChvYmosIGJ1dHRvblN1Ym1pdCkge1xyXG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBidXR0b25TdWJtaXQpO1xyXG4gICAgYXBpLnNlbmREYXRhQXZhdGFyKG9iaikudGhlbihvYmogPT4ge1xyXG4gICAgICAgIHVzZXJEYXRhLnNldFVzZXJBdmF0YXIob2JqLmF2YXRhcik7XHJcbiAgICAgICAgcG9wdXBVcGRhdGVBdmF0YXIuY2xvc2UoKTtcclxuICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBidXR0b25TdWJtaXQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgYnV0dG9uU3VibWl0KSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gJ0PQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAnQ9C+0YXRgNCw0L3QuNGC0YwnO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKtCd0LDQstC10YjQuNCy0LDQvdC40LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINGB0L7QsdGL0YLQuNC5INC90LAg0LrQvdC+0L/QutC4IGVkaXQsIGFkZCDQuCDQsNCy0LDRgtCw0YAqL1xyXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcG9wdXBFZGl0Lm9wZW4oKTtcclxuICAgIHBvcHVwRWRpdC5zZXRJbnB1dFZhbHVlcyh1c2VyRGF0YS5nZXRVc2VySW5mbygpKTtcclxufSk7XHJcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGZvcm1WYWxpZGF0b3JzWydmb3JtQ2FyZCddLnJlc2V0VmFsaWRhdGlvbigpOyAvKtCS0YvQsdC40YDQsNGOINC90YPQttC90YPRjiDQvNC90LUg0YTQvtGA0LzRgyDQtNC70Y8gdmFsaWQqL1xyXG4gICAgcG9wdXBBZGQub3BlbigpO1xyXG59KTtcclxuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcG9wdXBVcGRhdGVBdmF0YXIub3BlbigpO1xyXG59KSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGJhc2VVUkwsIGhlYWRlcnMgfSkge1xyXG4gICAgICAgIHRoaXMuX2Jhc2VVUkwgPSBiYXNlVVJMO1xyXG4gICAgICAgIHRoaXMuX3VybERhdGFQcm9maWxlID0gYCR7dGhpcy5fYmFzZVVSTH11c2Vycy9tZS9gO1xyXG4gICAgICAgIHRoaXMuX3VybENhcmQgPSBgJHt0aGlzLl9iYXNlVVJMfWNhcmRzL2A7XHJcbiAgICAgICAgdGhpcy5fdXJsQXZhdGFyID0gYCR7dGhpcy5fYmFzZVVSTH11c2Vycy9tZS9hdmF0YXIvYDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhUHJvZmlsZSgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsRGF0YVByb2ZpbGUsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhQ2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsQ2FyZCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmREYXRhUHJvZmlsZShvYmopIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsRGF0YVByb2ZpbGUsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9iaiksXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbmREYXRhQXZhdGFyKG9iaikge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmxBdmF0YXIsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9iaiksXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3RDYXJkID0gKG9iaikgPT4ge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmxDYXJkLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9iaiksXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG4gICAgLy/QktGL0LLQvtC0INGE0YPQvdC60YbQuNC4INGH0LXRgNC10Lcg0YHRgtGA0LXQu9C+0YfQvdGD0Y4g0YfRgtC+0LHRiyDQv9GA0Lgg0L/QtdGA0LXQtNCw0YfQtSDQtNCw0L3QvdC+0LPQviDQvNC10YLQvtC00LAg0LIg0LTRgNGD0LPQvtC5INC60LvQsNGB0YEg0L3QtSDRgtC10YDRj9C70YHRjyDQutC+0L3RgtC10LrRgdGCIHRoaXNcclxuICAgIC8v0KLQsNC6INC20LUg0LLQvtC30LzQvtC20LXQvSDQstCw0YDQuNCw0L3RgiDQutC+0LPQtNCwINC/0YDQuCDQv9C10YDQtdC00LDRh9C1INC80LXRgtC+0LTQsCDQvtC00L3QvtCz0L4g0LrQu9Cw0YHRgdCwINCyINC00YDRg9Cz0L7QuSDQutC70LDRgdGBXHJcbiAgICAvL9CX0LDQutGA0LXQv9C70Y/RgtGMIHRoaXMg0LzQtdGC0L7QtNC+0LwgYmluZCgpXHJcbiAgICBkZWxldGVDYXJkID0gKGlkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybENhcmR9JHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1dExpa2VzID0gKGlkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybENhcmR9JHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVMaWtlcyA9IChpZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmxDYXJkfSR7aWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XHJcbiAgICAgICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c30gICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG5cclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQmlnUGhvdG8gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2JpZ1Bob3RvJyk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBQaG90b1N1YnRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJ0aXRsZScpO1xyXG4gICAgfVxyXG4gICAgLyrQo9Cy0LXQu9C40YfQtdC90LjQtSDRhNC+0YLQviovXHJcbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEJpZ1Bob3RvLmFsdCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBCaWdQaG90by5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG9TdWJ0aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXAsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmRlbGV0ZUNhcmQsIHRoaXMuaWQpO1xyXG4gICAgICAgICAgICAvKnN1cGVyLmNsb3NlKCk7Ki9cclxuICAgICAgICB9KTtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGVsZXRlQ2FyZCwgaWQpIHtcclxuICAgICAgICBzdXBlci5vcGVuKClcclxuICAgICAgICB0aGlzLmRlbGV0ZUNhcmQgPSBkZWxldGVDYXJkO1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZFxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBzdGF0dXNTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdGF0dXNTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudDtcclxuICAgICAgICB0aGlzLl9hYm91dCA9IHRoaXMuX3Byb2ZpbGVTdGF0dXMudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mbyA9IHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcclxuICAgICAgICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5mb1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZ1bGxQYWNrSW5mb09iaiA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm9ybWF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNhdmVTZXJ2ZXJJbmZvcm1hdGlvbih1c2VySW5mb3JtYXRpb24pIHtcclxuICAgICAgICB0aGlzLl91c2VySW5mb3JtYXRpb24gPSB1c2VySW5mb3JtYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oaW5wdXROYW1lLCBpbnB1dFN0YXR1cykge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gaW5wdXROYW1lO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdGF0dXMudGV4dENvbnRlbnQgPSBpbnB1dFN0YXR1cztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyQXZhdGFyKGF2YXRhckxpbmspIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhckxpbms7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsicHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJ1dHRvbkVkaXQiLCJidXR0b25BZGQiLCJhdmF0YXIiLCJmb3JtVmFsaWRhdG9ycyIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIm9iaiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImRlbGV0ZUxpa2VzIiwicHV0TGlrZXMiLCJwb3B1cERlbGV0ZSIsImZ1bGxQYWNrSW5mb09iaiIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9kZWxldGVMaWtlcyIsIl9wdXRMaWtlcyIsIl9wb3B1cERlbGV0ZSIsIl9teUlkIiwiX215TmFtZSIsImNyZWF0ZUNhcmQiLCJfbmV3Q2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfYnV0dG9uRGVsZXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGl0bGVDYXJkIiwiYnV0dG9uTGlrZSIsInBob3RvTGlua0NhcmQiLCJjYXJkQ291bnRMaWtlIiwiaSIsImxlbmd0aCIsIl9zZXRDbGFzc0xpa2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsIl9yZW1vdmVMaWtlIiwiX2FkZExpa2UiLCJfZGVsZXRlQ2FyZCIsImJpbmQiLCJ0aGVuIiwiciIsImNhdGNoIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsInRvZ2dsZSIsIl9kZWxldGVEb21DYXJkIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfY29uZmlnIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJlcnJvckNsYXNzIiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInNlbGVjdG9yUG9wdXAiLCJfcG9wdXAiLCJfYnV0dG9uQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2ViaW5kIiwiX2hhbmRsZUVzY0Nsb3NlIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfYnV0dG9uU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInJlc2V0IiwiYXBpIiwiYmFzZVVSTCIsImhlYWRlcnMiLCJmZXRjaCIsIl91cmxDYXJkIiwibWV0aG9kIiwiX2hlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlcyIsIl9nZXRSZXNwb25zZURhdGEiLCJfYmFzZVVSTCIsIl91cmxEYXRhUHJvZmlsZSIsIl91cmxBdmF0YXIiLCJnZXREYXRhUHJvZmlsZSIsImdldERhdGFDYXJkIiwic2VuZERhdGFQcm9maWxlIiwic2VuZERhdGFBdmF0YXIiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImF1dGhvcml6YXRpb24iLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kSXRlbSIsInByZXBlbmQiLCJjbGVhciIsImlubmVySFRNTCIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJfcmVuZGVyZWRJdGVtcyIsIml0ZW0iLCJjYXJkRWxlbWVudCIsInBvcHVwRWRpdCIsImJ1dHRvblN1Ym1pdCIsInJlbmRlckxvYWRpbmciLCJ1c2VyRGF0YSIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJwb3B1cEFkZCIsInBvc3RDYXJkIiwicG9wdXBJbWFnZSIsIl9wb3B1cEJpZ1Bob3RvIiwiX3BvcHVwUGhvdG9TdWJ0aXRsZSIsImRlbGV0ZUNhcmQiLCJwb3B1cFVwZGF0ZUF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJuYW1lU2VsZWN0b3IiLCJzdGF0dXNTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3VzZXJJbmZvcm1hdGlvbiIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlU3RhdHVzIiwiX3Byb2ZpbGVBdmF0YXIiLCJnZXRVc2VySW5mbyIsIl9hYm91dCIsImluZm8iLCJzYXZlU2VydmVySW5mb3JtYXRpb24iLCJ1c2VySW5mb3JtYXRpb24iLCJpbnB1dE5hbWUiLCJpbnB1dFN0YXR1cyIsImF2YXRhckxpbmsiLCJnZXRGdWxsUGFja0luZm9PYmoiLCJ1cmwiLCJpc0xvYWRpbmciLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiYWxsIiwiaXRlbXNVc2VyRGF0YSIsIml0ZW1zQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=