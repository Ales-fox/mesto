!function(){"use strict";const t=document.querySelector(".profile"),e=t.querySelector(".button-edit"),s=t.querySelector(".button-add"),n={};class r{constructor(t,e,s){let{nameofplace:n,url:r}=t;this._cardSelector=e,this._name=n,this._url=r,this._handleCardClick=s}createCard(){this._newCard=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0);const t=this._newCard.querySelector(".card__title");return this.photoLinkCard=this._newCard.querySelector(".card__photo"),this._setEventListeners(),t.textContent=this._name,this.photoLinkCard.src=this._url,this.photoLinkCard.alt=this._name,this._newCard}_setEventListeners(){this._newCard.querySelector(".button-like").addEventListener("click",(t=>{this._toggleLike(t)})),this._newCard.querySelector(".button-delete").addEventListener("click",(()=>{this._deleteCard()})),this.photoLinkCard.addEventListener("click",(()=>{this._handleCardClick(this._name,this._url)}))}_toggleLike(t){t.target.classList.toggle("button-like_active")}_deleteCard(){this._newCard.remove(),this._newCard=null}}class o{constructor(t,e){this._config=t,this._form=e}enableValidation(){this._setEventListeners()}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll("".concat(this._config.inputSelector))),this._buttonElement=this._form.querySelector("".concat(this._config.submitButtonSelector)),this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_showInputError(t,e){const s=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.add(this._config.inputErrorClass),s.textContent=e,s.classList.add("".concat(this._config.errorClass,"_active"))}_hideInputError(t){const e=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.remove(this._config.inputErrorClass),e.classList.remove("".concat(this._config.errorClass,"_active")),e.textContent=""}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}}class i{constructor(t){this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".button-close"),this._handleEscClosebind=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClosebind)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClosebind)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._buttonClose.addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",(t=>{t.target===t.currentTarget&&this.close()}))}}class a extends i{constructor(t,e){super(t),this.handleFormSubmit=e,this._inputList=this._popup.querySelectorAll(".input"),this.setEventListeners()}_getInputValues(){return this.formValues={},this._inputList.forEach((t=>{this.formValues[t.name]=t.value})),this.formValues}setEventListeners(){this._form=this._popup.querySelector(".popup__container"),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this._getInputValues())})),super.setEventListeners()}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}close(){this._form.reset(),super.close()}}const c=new a(".popup_form_edit",(function(t){p.setUserInfo(t.name,t.status),c.close()})),l=new a(".popup_form_add",(function(t){d.prependItem(_(t)),l.close()})),u=new class extends i{constructor(t){super(t),this._popupBigPhoto=this._popup.querySelector(".popup__bigPhoto"),this._popupPhotoSubtitle=this._popup.querySelector(".popup__subtitle")}open(t,e){this._popupBigPhoto.alt=t,this._popupBigPhoto.src=e,this._popupPhotoSubtitle.textContent=t,super.open()}}(".popup_photo"),p=new class{constructor(t,e){this._profileName=document.querySelector(t),this._profileStatus=document.querySelector(e)}getUserInfo(){return this._name=this._profileName.textContent,this._status=this._profileStatus.textContent,this.info={name:this._name,status:this._status},this.info}setUserInfo(t,e){this._profileName.textContent=t,this._profileStatus.textContent=e}}(".profile__name",".profile__status");var h;u.setEventListeners(),h={form:".popup__container",inputSelector:".input",submitButtonSelector:".button-submit",inactiveButtonClass:"button_invalid",inputErrorClass:"input_type_error",errorClass:"input-error"},Array.from(document.querySelectorAll(h.form)).forEach((t=>{const e=new o(h,t),s=t.getAttribute("name");n[s]=e,e.enableValidation()}));const d=new class{constructor(t,e){let{items:s,renderer:n}=t;this._renderedItems=s,this._renderer=n,this._container=document.querySelector(e)}addItem(t){this._container.append(t)}prependItem(t){this._container.prepend(t)}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._renderedItems.forEach((t=>{this._renderer(t)}))}}({items:[{nameofplace:"Архыз",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{nameofplace:"Челябинская область",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{nameofplace:"Иваново",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{nameofplace:"Камчатка",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{nameofplace:"Холмогорский район",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{nameofplace:"Байкал",url:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:t=>{const e=_(t);d.addItem(e)}},".cards");function _(t){return new r(t,".template__card",m).createCard()}function m(t,e){u.open(t,e)}d.renderItems(),e.addEventListener("click",(function(){c.open(),c.setInputValues(p.getUserInfo())})),s.addEventListener("click",(function(){n.formCard.resetValidation(),l.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RkFFVCxDQUNJRCxZQUFhLFVBQ2JDLElBQUssa0ZBRVQsQ0FDSUQsWUFBYSxXQUNiQyxJQUFLLG9GQUVULENBQ0lELFlBQWEscUJBQ2JDLElBQUssNkZBRVQsQ0FDSUQsWUFBYSxTQUNiQyxJQUFLLGtGS1VUNkcsU0FBV1csSUFDUCxNQUFNQyxFQUFjbkgsRUFBV2tILEdBQy9CaEMsRUFBU3lCLFFBQVFRLEtBRXRCLFVBSUgsU0FBU25ILEVBQVc2RSxHQUdoQixPQUZnQixJQUFJeEYsRUFBS3dGLEVBQUssa0JBQW1CckYsR0FDckJRLGFBSWhDLFNBQVNSLEVBQWdCOEUsRUFBTTVFLEdBQzNCMEYsRUFBVzFCLEtBQUtZLEVBQU01RSxHQVYxQndGLEVBQVMrQixjQTBCVC9ILEVBQVd3QixpQkFBaUIsU0FBUyxXQUNqQ2tFLEVBQVVsQixPQUNWa0IsRUFBVUgsZUFBZUssRUFBU2Msa0JBRXRDekcsRUFBVXVCLGlCQUFpQixTQUFTLFdBQ2hDdEIsRUFBQUEsU0FBQUEsa0JBQ0E2RixFQUFTdkIsVSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XHJcbmNvbnN0IGJ1dHRvbkVkaXQgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tZWRpdCcpO1xyXG5jb25zdCBidXR0b25BZGQgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tYWRkJyk7XHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgICBuYW1lb2ZwbGFjZTogJ9CQ0YDRhdGL0LcnLFxyXG4gICAgICAgIHVybDogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lb2ZwbGFjZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxyXG4gICAgICAgIHVybDogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lb2ZwbGFjZTogJ9CY0LLQsNC90L7QstC+JyxcclxuICAgICAgICB1cmw6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWVvZnBsYWNlOiAn0JrQsNC80YfQsNGC0LrQsCcsXHJcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWVvZnBsYWNlOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxyXG4gICAgICAgIHVybDogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lb2ZwbGFjZTogJ9CR0LDQudC60LDQuycsXHJcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXHJcbiAgICB9XHJcbl07XHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICAgIGZvcm06ICcucG9wdXBfX2NvbnRhaW5lcicsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLmlucHV0JyxcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmJ1dHRvbi1zdWJtaXQnLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2J1dHRvbl9pbnZhbGlkJyxcclxuICAgIGlucHV0RXJyb3JDbGFzczogJ2lucHV0X3R5cGVfZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ2lucHV0LWVycm9yJ1xyXG59O1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuZXhwb3J0IHsgYnV0dG9uRWRpdCwgYnV0dG9uQWRkLCBpbml0aWFsQ2FyZHMsIGNvbmZpZywgZm9ybVZhbGlkYXRvcnMgfTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZW9mcGxhY2UsIHVybCB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZW9mcGxhY2U7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIH1cclxuICAgIC8q0KHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4Ki9cclxuICAgIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fbmV3Q2FyZCA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICBjb25zdCB0aXRsZUNhcmQgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgICAgIHRoaXMucGhvdG9MaW5rQ2FyZCA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX3Bob3RvJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRpdGxlQ2FyZC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5waG90b0xpbmtDYXJkLnNyYyA9IHRoaXMuX3VybDtcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25ld0NhcmQ7XHJcbiAgICB9XHJcbiAgICAvKtCj0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70LXQuSovXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWxpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHsgdGhpcy5fdG9nZ2xlTGlrZShldnQpIH0pO1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1kZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgdGhpcy5fZGVsZXRlQ2FyZCgpIH0pO1xyXG4gICAgICAgIHRoaXMucGhvdG9MaW5rQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX3VybCk7IC8q0KHRgtGA0LXQu9C+0YfQvdCw0Y8g0YTRg9C90LrRhtC40Y8s0YfRgtC+0LHRiyDQv9GA0LjQvdC40LzQsNC70LAg0LLQtdGA0L3Ri9C5IHRoaXMuINCi0LDQuiDQttC1INC80L7QttC90L4g0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINC80LXRgtC+0LQgYmluZCgpKi9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlTGlrZShldnQpIHtcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2J1dHRvbi1saWtlX2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gICAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fbmV3Q2FyZC5yZW1vdmUoKTtcclxuICAgICAgICB0aGlzLl9uZXdDYXJkID0gbnVsbDtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIC8q0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvNGLKi9cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoYCR7dGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3J9YCkpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yfWApO1xyXG4gICAgICAgIC8vINGH0YLQvtCx0Ysg0L/RgNC+0LLQtdGA0LjRgtGMINGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60Lgg0LIg0YHQsNC80L7QvCDQvdCw0YfQsNC70LVcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgLy8g0YfRgtC+0LHRiyDQv9GA0L7QstC10YDRj9GC0Ywg0LXQs9C+INC/0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0LvRjtCx0L7Qs9C+INC40Lcg0L/QvtC70LXQuVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5fY29uZmlnLmVycm9yQ2xhc3N9XyR7aW5wdXRFbGVtZW50LmlkfWApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChgJHt0aGlzLl9jb25maWcuZXJyb3JDbGFzc31fYWN0aXZlYCk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2NvbmZpZy5lcnJvckNsYXNzfV8ke2lucHV0RWxlbWVudC5pZH1gKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShgJHt0aGlzLl9jb25maWcuZXJyb3JDbGFzc31fYWN0aXZlYCk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclBvcHVwKTtcclxuICAgICAgICB0aGlzLl9idXR0b25DbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tY2xvc2UnKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZWJpbmQgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlYmluZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlYmluZCk7XHJcbiAgICB9XHJcbiAgICAvKtCX0LDQutGA0YvRgtC40LUgcG9wdXAg0LrQu9Cw0LLQuNGI0LXQuSBFc2MqL1xyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvKtCj0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsCDQutC90L7Qv9C60YMgQ2xvc2UqL1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvKtCj0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsCBPdmVybGF5Ki9cclxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXAsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dCcpXHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLmZvcm1WYWx1ZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1WYWx1ZXNcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIC8vINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBgdmFsdWVgINC40L3Qv9GD0YLQsCDQtNCw0L3QvdGL0LUg0LjQtyDQvtCx0YrQtdC60YLQsCDQv9C+INCw0YLRgNC40LHRg9GC0YMgYG5hbWVgINGN0YLQvtCz0L4g0LjQvdC/0YPRgtCwXHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7LyrQntGH0LjRgdGC0LrQsCDRhNC+0YDQvNGLKi9cclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcydcclxuXHJcbmltcG9ydCB7IGJ1dHRvbkVkaXQsIGJ1dHRvbkFkZCwgaW5pdGlhbENhcmRzLCBjb25maWcsIGZvcm1WYWxpZGF0b3JzIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJ1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnXHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcydcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnXHJcblxyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fZWRpdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fYWRkJywgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfcGhvdG8nKTtcclxuY29uc3QgdXNlckRhdGEgPSBuZXcgVXNlckluZm8oJy5wcm9maWxlX19uYW1lJywgJy5wcm9maWxlX19zdGF0dXMnKTtcclxuXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtKSlcclxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudClcclxuICAgICAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQuNC3INCw0YLRgNC40LHRg9GC0LAgYG5hbWVgINGDINGE0L7RgNC80YtcclxuICAgICAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpXHJcblxyXG4gICAgICAgIC8vINCy0L7RgiDRgtGD0YIg0LIg0L7QsdGK0LXQutGCINC30LDQv9C40YHRi9Cy0LDQtdC8INC/0L7QtCDQuNC80LXQvdC10Lwg0YTQvtGA0LzRi1xyXG4gICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcblxyXG4vKtCh0L7Qt9C00LDQvdC40LUg0L3QsNGH0LDQu9GM0L3QvtCz0L4g0L3QsNCx0L7RgNCwINC60LDRgNGC0L7Rh9C10LoqL1xyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcbn0sICcuY2FyZHMnKTtcclxuY2FyZExpc3QucmVuZGVySXRlbXMoKTsvKtCy0YvQt9C+0LIg0YDQtdC90LTQtdGA0LAg0L3QsNGH0LDQu9GM0L3Ri9GFINC60LDRgNGC0L7Rh9C10LoqL1xyXG5cclxuLyrQodC+0LfQtNCw0L3QuNC1INC90L7QstGL0YUg0LrQsNGA0YLQvtGH0LXQuiovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQob2JqKSB7XHJcbiAgICBjb25zdCBjYXJkTmV3ID0gbmV3IENhcmQob2JqLCAnLnRlbXBsYXRlX19jYXJkJywgaGFuZGxlQ2FyZENsaWNrKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZE5ldy5jcmVhdGVDYXJkKCk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIHVybCkge1xyXG4gICAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIHVybCk7XHJcbn1cclxuXHJcbi8q0KHQvtGF0YDQsNC90LXQvdC40LUg0Lgg0L7RgtGB0YvQu9C60LAg0LTQsNC90L3Ri9GFINGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQvdCwINGB0LXRgNCy0LXRgCovXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KG9iaikge1xyXG4gICAgdXNlckRhdGEuc2V0VXNlckluZm8ob2JqLm5hbWUsIG9iai5zdGF0dXMpO1xyXG4gICAgcG9wdXBFZGl0LmNsb3NlKCk7XHJcbn1cclxuXHJcbi8q0KHQvtGF0YDQsNC90LXQvdC40LUg0LTQsNC90L3Ri9GFINC4INC/0L7RgdC70LXQtNGD0Y7RidC10LUg0LTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4Ki9cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQob2JqKSB7XHJcbiAgICBjYXJkTGlzdC5wcmVwZW5kSXRlbShjcmVhdGVDYXJkKG9iaikpO1xyXG4gICAgcG9wdXBBZGQuY2xvc2UoKTtcclxufVxyXG5cclxuLyrQndCw0LLQtdGI0LjQstCw0L3QuNC10L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINGB0L7QsdGL0YLQuNC5INC90LAg0LrQvdC+0L/QutC4IGVkaXQg0LggYWRkKi9cclxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIHBvcHVwRWRpdC5vcGVuKCk7XHJcbiAgICBwb3B1cEVkaXQuc2V0SW5wdXRWYWx1ZXModXNlckRhdGEuZ2V0VXNlckluZm8oKSk7XHJcbn0pO1xyXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1snZm9ybUNhcmQnXS5yZXNldFZhbGlkYXRpb24oKTsgLyrQktGL0LHQuNGA0LDRjiDQvdGD0LbQvdGD0Y4g0LzQvdC1INGE0L7RgNC80YMg0LTQu9GPIHZhbGlkKi9cclxuICAgIHBvcHVwQWRkLm9wZW4oKTtcclxufSk7IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQmlnUGhvdG8gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2JpZ1Bob3RvJyk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBQaG90b1N1YnRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJ0aXRsZScpO1xyXG4gICAgfVxyXG4gICAgLyrQo9Cy0LXQu9C40YfQtdC90LjQtSDRhNC+0YLQviovXHJcbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEJpZ1Bob3RvLmFsdCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBCaWdQaG90by5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG9TdWJ0aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBzdGF0dXNTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN0YXR1c1NlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gdGhpcy5fcHJvZmlsZVN0YXR1cy50ZXh0Q29udGVudDtcclxuICAgICAgICB0aGlzLmluZm8gPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXHJcbiAgICAgICAgICAgIHN0YXR1czogdGhpcy5fc3RhdHVzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5mb1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKGlucHV0TmFtZSwgaW5wdXRTdGF0dXMpIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGlucHV0TmFtZTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlU3RhdHVzLnRleHRDb250ZW50ID0gaW5wdXRTdGF0dXM7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9uRWRpdCIsImJ1dHRvbkFkZCIsImZvcm1WYWxpZGF0b3JzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZW9mcGxhY2UiLCJ1cmwiLCJ0aGlzIiwiX2NhcmRTZWxlY3RvciIsIl9uYW1lIiwiX3VybCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjcmVhdGVDYXJkIiwiX25ld0NhcmQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwidGl0bGVDYXJkIiwicGhvdG9MaW5rQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsIl90b2dnbGVMaWtlIiwiX2RlbGV0ZUNhcmQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9jb25maWciLCJfZm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfaGFzSW52YWxpZElucHV0IiwiYWRkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImVycm9yQ2xhc3MiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwic2VsZWN0b3JQb3B1cCIsIl9wb3B1cCIsIl9idXR0b25DbG9zZSIsIl9oYW5kbGVFc2NDbG9zZWJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInJlc2V0IiwicG9wdXBFZGl0Iiwib2JqIiwidXNlckRhdGEiLCJzZXRVc2VySW5mbyIsInN0YXR1cyIsInBvcHVwQWRkIiwiY2FyZExpc3QiLCJwcmVwZW5kSXRlbSIsInBvcHVwSW1hZ2UiLCJfcG9wdXBCaWdQaG90byIsIl9wb3B1cFBob3RvU3VidGl0bGUiLCJsaW5rIiwibmFtZVNlbGVjdG9yIiwic3RhdHVzU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZVN0YXR1cyIsImdldFVzZXJJbmZvIiwiX3N0YXR1cyIsImluZm8iLCJpbnB1dE5hbWUiLCJpbnB1dFN0YXR1cyIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJjbGVhciIsImlubmVySFRNTCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImNhcmRFbGVtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==