!function(){"use strict";const t=document.querySelector(".profile"),e=t.querySelector(".button-edit"),s=t.querySelector(".button-add"),i=t.querySelector(".profile__avatar-hover"),o={urlDataProfile:"https://nomoreparties.co/v1/cohort-46/users/me/",urlCard:"https://mesto.nomoreparties.co/v1/cohort-46/cards/",urlAvatar:"https://mesto.nomoreparties.co/v1/cohort-46/users/me/avatar/",headers:{authorization:"13749ec2-245f-4fcd-8f22-451e84bec66b","Content-Type":"application/json"}},r={};class n{constructor(t,e,s,i,o,r,n,a,c){this._name=t.name,this._link=t.link,this._id=t._id,this._likes=t.likes,this._ownerId=t.owner._id,this._cardSelector=e,this._url=s,this._handleCardClick=i,this._deleteMethodCard=o,this._deleteLikes=r,this._putLikes=n,this._popupDelete=a,this._myId=c()._id,this._myName=c().name}createCard(){this._newCard=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._buttonDelete=this._newCard.querySelector(".button-delete"),this._ownerId!==this._myId&&this._buttonDelete.classList.add("button-delete_inactive"),this.titleCard=this._newCard.querySelector(".card__title"),this.buttonLike=this._newCard.querySelector(".button-like"),this.photoLinkCard=this._newCard.querySelector(".card__photo"),this.cardCountLike=this._newCard.querySelector(".card__count-like");for(let t=0;t<this._likes.length;t++)if(this._likes[t].name===this._myName){this.buttonLike.classList.add("button-like_active");break}return this._setEventListeners(),this.titleCard.textContent=this._name,this.photoLinkCard.src=this._link,this.photoLinkCard.alt=this._name,this.cardCountLike.textContent=this._likes.length,this._newCard}_setEventListeners(){this._newCard.querySelector(".button-like").addEventListener("click",(()=>{this.buttonLike.classList.contains("button-like_active")?this._removeLike():this._addLike()})),this._buttonDelete.classList.contains("button-delete_inactive")||this._buttonDelete.addEventListener("click",(()=>{this._popupDelete(this._deleteCard.bind(this))})),this.photoLinkCard.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_addLike(){this._putLikes(this._url,this._id).then((t=>{this.buttonLike.classList.add("button-like_active"),this.cardCountLike.textContent=t.likes.length})).catch((t=>console.error(t)))}_removeLike(){this._deleteLikes(this._url,this._id).then((t=>{this.buttonLike.classList.remove("button-like_active"),this.cardCountLike.textContent=t.likes.length})).catch((t=>console.error(t)))}_deleteCard(){this._deleteMethodCard(this._url,this._id).then((t=>{this._newCard.remove(),this._newCard=null})).catch((t=>console.error(t)))}}class a{constructor(t,e){this._config=t,this._form=e}enableValidation(){this._setEventListeners()}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll("".concat(this._config.inputSelector))),this._buttonElement=this._form.querySelector("".concat(this._config.submitButtonSelector)),this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}_showInputError(t,e){const s=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.add(this._config.inputErrorClass),s.textContent=e,s.classList.add("".concat(this._config.errorClass,"_active"))}_hideInputError(t){const e=this._form.querySelector(".".concat(this._config.errorClass,"_").concat(t.id));t.classList.remove(this._config.inputErrorClass),e.classList.remove("".concat(this._config.errorClass,"_active")),e.textContent=""}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}}class c{constructor(t,e){let{items:s,renderer:i}=t;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(e)}addItem(t){this._container.append(t)}prependItem(t){this._container.prepend(t)}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._renderedItems.forEach((t=>{this._renderer(t)}))}}class h{constructor(t){this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".button-close"),this._handleEscClosebind=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClosebind)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClosebind)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._buttonClose.addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",(t=>{t.target===t.currentTarget&&this.close()}))}}class l extends h{constructor(t,e){super(t),this.handleFormSubmit=e,this._buttonSubmit=this._popup.querySelector("button-submit"),this._inputList=this._popup.querySelectorAll(".input"),this.setEventListeners()}_getInputValues(){return this.formValues={},this._inputList.forEach((t=>{this.formValues[t.name]=t.value})),this.formValues}setEventListeners(){this._form=this._popup.querySelector(".popup__container"),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this._getInputValues(),t)})),super.setEventListeners()}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}close(){this._form.reset(),super.close()}}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const d=new class{constructor(t){let{headers:e}=t;u(this,"postCard",((t,e)=>fetch(t,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((t=>t.ok?t.json():Promise.reject("Невозможно добавить карточку ".concat(t.status," ").concat(t.statusText)))))),u(this,"deleteCard",((t,e)=>fetch("".concat(t).concat(e),{method:"DELETE",headers:this._headers}).then((t=>t.ok?t.json():Promise.reject("Невозможно удалить карточку' ".concat(t.status," ").concat(t.statusText)))))),u(this,"deleteLikes",((t,e)=>fetch("".concat(t).concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((t=>t.ok?t.json():Promise.reject("Ошибка удаления лайка' ".concat(t.status," ").concat(t.statusText)))))),u(this,"putLikes",((t,e)=>fetch("".concat(t).concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((t=>t.ok?t.json():Promise.reject("Ошибка установки лайка ".concat(t.status," ").concat(t.statusText)))))),this._headers=e}getData(t){return fetch(t,{headers:this._headers}).then((t=>{if(t.ok)return t.json();Promise.reject("Ошибка загрузки данных ".concat(t.status))}))}sendData(t,e){return fetch(t,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((t=>t.ok?t.json():Promise.reject("Ошибка отправки данных ".concat(t.status," ").concat(t.statusText))))}}(o),_=new l(".popup_form_edit",(function(t,e){k(!0,e),d.sendData(o.urlDataProfile,t).then((t=>{b.setUserInfo(t.name,t.about),_.close()})).catch((t=>console.error(t))),k(!1,e)})),p=new l(".popup_form_add",(function(t,e){k(!0,e),d.postCard(o.urlCard,t).then((t=>{C(),p.close()})).catch((t=>console.error(t))),k(!1,e)})),m=new class extends h{constructor(t){super(t),this._popupBigPhoto=this._popup.querySelector(".popup__bigPhoto"),this._popupPhotoSubtitle=this._popup.querySelector(".popup__subtitle")}open(t,e){this._popupBigPhoto.alt=t,this._popupBigPhoto.src=e,this._popupPhotoSubtitle.textContent=t,super.open()}}(".popup_photo"),f=new class extends h{constructor(t,e){super(t),this.handleFormSubmit=e,this._setEventListeners()}_setEventListeners(){this._form=this._popup.querySelector(".popup__container"),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.handleFormSubmit(this.deleteCard),super.close()})),super.setEventListeners()}open(t){super.open(),this.deleteCard=t}}(".popup_form_delete",(function(t){t()})),v=new l(".popup_form_updateAvatar",(function(t,e){k(!0,e),d.sendData(o.urlAvatar,t).then((t=>{b.setUserAvatar(t.avatar),v.close()})).catch((t=>console.error(t))),k(!1,e)})),b=new class{constructor(t,e,s){var i,o;o=()=>this._userInformation,(i="getFullPackInfoObj")in this?Object.defineProperty(this,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[i]=o,this._profileName=document.querySelector(t),this._profileStatus=document.querySelector(e),this._profileAvatar=document.querySelector(s)}getUserInfo(){return this._name=this._profileName.textContent,this._about=this._profileStatus.textContent,this.info={name:this._name,about:this._about},this.info}saveServerInformation(t){this._userInformation=t}setUserInfo(t,e){this._profileName.textContent=t,this._profileStatus.textContent=e}setUserAvatar(t){this._profileAvatar.src=t}}(".profile__name",".profile__status",".profile__avatar");function C(){d.getData(o.urlCard).then((t=>{const e=new c({items:t,renderer:t=>{const s=new n(t,".template__card",o.urlCard,L,d.deleteCard,d.deleteLikes,d.putLikes,f.open.bind(f),b.getFullPackInfoObj).createCard();e.addItem(s)}},".cards");e.renderItems()})).catch((t=>console.log(t)))}function L(t,e){m.open(t,e)}function k(t,e){e.textContent=t?"Cохранение...":"Cохранить"}var E;m.setEventListeners(),E={form:".popup__container",inputSelector:".input",submitButtonSelector:".button-submit",inactiveButtonClass:"button_invalid",inputErrorClass:"input_type_error",errorClass:"input-error"},Array.from(document.querySelectorAll(E.form)).forEach((t=>{const e=new a(E,t),s=t.getAttribute("name");r[s]=e,e.enableValidation()})),d.getData(o.urlDataProfile).then((t=>{b.saveServerInformation(t),b.setUserInfo(t.name,t.about),b.setUserAvatar(t.avatar)})).catch((t=>console.log(t))),C(),e.addEventListener("click",(function(){_.open(),_.setInputValues(b.getUserInfo())})),s.addEventListener("click",(function(){r.formCard.resetValidation(),p.open()})),i.addEventListener("click",(function(){v.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlLFNBQ2ZFLHFCQUFzQixpQkFDdEJNLG9CQUFxQixpQkFDckJZLGdCQUFpQixtQkFDakJGLFdBQVksZU1jS3JCLE1BQU1DLEtBQUtoRixTQUFTaUYsaUJBQWlCUixFQUFPQyxPQUNwRFksU0FBUytHLElBQ2QsTUFBTUMsRUFBWSxJQUFJOUgsRUFBY0MsRUFBUTRILEdBRXRDRSxFQUFXRixFQUFZRyxhQUFhLFFBRzFDN0wsRUFBZTRMLEdBQVlELEVBQzNCQSxFQUFVekgsc0JBT2xCcUUsRUFBSWMsUUFBUTNKLEVBQVFDLGdCQUFnQjJELE1BQUt5QyxJQUNyQzJELEVBQVNzQixzQkFBc0JqRixHQUMvQjJELEVBQVNDLFlBQVk1RCxFQUFNakYsS0FBTWlGLEVBQU02RCxPQUN2Q0YsRUFBU1csY0FBY3RFLEVBQU10RyxXQUM5QitELE9BQU9HLEdBQVVELFFBQVE4SCxJQUFJN0gsS0F3QmhDb0csSUFpREF4SyxFQUFXeUQsaUJBQWlCLFNBQVMsV0FDakN1RyxFQUFVcEMsT0FDVm9DLEVBQVVuQixlQUFlc0IsRUFBU21CLGtCQUV0Q3JMLEVBQVV3RCxpQkFBaUIsU0FBUyxXQUNoQ2hELEVBQUFBLFNBQUFBLGtCQUNBNkosRUFBUzFDLFVBRWIxSCxFQUFPdUQsaUJBQWlCLFNBQVMsV0FDN0JvSCxFQUFrQmpELFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XHJcbmNvbnN0IGJ1dHRvbkVkaXQgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tZWRpdCcpO1xyXG5jb25zdCBidXR0b25BZGQgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tYWRkJyk7XHJcbmNvbnN0IGF2YXRhciA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1ob3ZlcicpO1xyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgICBmb3JtOiAnLnBvcHVwX19jb250YWluZXInLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5idXR0b24tc3VibWl0JyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdidXR0b25faW52YWxpZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdpbnB1dF90eXBlX2Vycm9yJyxcclxuICAgIGVycm9yQ2xhc3M6ICdpbnB1dC1lcnJvcidcclxufTtcclxuY29uc3QgYXBpRGF0YSA9IHtcclxuICAgIHVybERhdGFQcm9maWxlOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00Ni91c2Vycy9tZS8nLFxyXG4gICAgdXJsQ2FyZDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDYvY2FyZHMvJyxcclxuICAgIHVybEF2YXRhcjogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDYvdXNlcnMvbWUvYXZhdGFyLycsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzEzNzQ5ZWMyLTI0NWYtNGZjZC04ZjIyLTQ1MWU4NGJlYzY2YicsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuZXhwb3J0IHsgYnV0dG9uRWRpdCwgYnV0dG9uQWRkLCBjb25maWcsIGZvcm1WYWxpZGF0b3JzLCBhdmF0YXIsIGFwaURhdGEgfTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKG9iaiwgY2FyZFNlbGVjdG9yLCB1cmxGb3JBcGksIGhhbmRsZUNhcmRDbGljaywgZGVsZXRlTWV0aG9kQ2FyZCwgZGVsZXRlTGlrZXMsIHB1dExpa2VzLCBwb3B1cERlbGV0ZSwgZnVsbFBhY2tJbmZvT2JqKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG9iai5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBvYmoubGluaztcclxuICAgICAgICB0aGlzLl9pZCA9IG9iai5faWQ7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBvYmoubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IG9iai5vd25lci5faWQ7XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3VybCA9IHVybEZvckFwaTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlTWV0aG9kQ2FyZCA9IGRlbGV0ZU1ldGhvZENhcmQ7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlTGlrZXMgPSBkZWxldGVMaWtlcztcclxuICAgICAgICB0aGlzLl9wdXRMaWtlcyA9IHB1dExpa2VzO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRGVsZXRlID0gcG9wdXBEZWxldGU7XHJcbiAgICAgICAgdGhpcy5fbXlJZCA9IGZ1bGxQYWNrSW5mb09iaigpLl9pZDtcclxuICAgICAgICB0aGlzLl9teU5hbWUgPSBmdWxsUGFja0luZm9PYmooKS5uYW1lO1xyXG4gICAgfVxyXG4gICAgLyrQodC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LgqL1xyXG4gICAgY3JlYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9uZXdDYXJkID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmNhcmQnKVxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWRlbGV0ZScpO1xyXG5cclxuICAgICAgICAvL9CV0YHQu9C4IElkINCy0LvQsNC00LXQu9GM0YbQsCDQutCw0YDRgtC+0YfQutC4INC90LUg0YHQvtCy0L/QsNC00LDQtdGCINGBINC80L7QuNC8IElkLCDRgtC+INC60L3QvtC/0LrQtSBkZWxldGUg0LTQvtCx0LDQstC70Y/RjiDQutC70LDRgdGBIFwi0L3QtdCy0LjQtNC40LzQvtGB0YLQuFwiXHJcbiAgICAgICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX215SWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi1kZWxldGVfaW5hY3RpdmUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGVDYXJkID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcclxuICAgICAgICB0aGlzLmJ1dHRvbkxpa2UgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tbGlrZScpO1xyXG4gICAgICAgIHRoaXMucGhvdG9MaW5rQ2FyZCA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX3Bob3RvJyk7XHJcbiAgICAgICAgdGhpcy5jYXJkQ291bnRMaWtlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fY291bnQtbGlrZScpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpa2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saWtlc1tpXS5uYW1lID09PSB0aGlzLl9teU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdidXR0b24tbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGVDYXJkLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLnBob3RvTGlua0NhcmQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLmNhcmRDb3VudExpa2UudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9uZXdDYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIC8q0KPRgdGC0LDQvdC+0LLQutCwINGB0LvRg9GI0LDRgtC10LvQtdC5Ki9cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoJ2J1dHRvbi1saWtlX2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRMaWtlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVMaWtlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLl9idXR0b25EZWxldGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXR0b24tZGVsZXRlX2luYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9wb3B1cERlbGV0ZSh0aGlzLl9kZWxldGVDYXJkLmJpbmQodGhpcykpIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5waG90b0xpbmtDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7IC8q0KHRgtGA0LXQu9C+0YfQvdCw0Y8g0YTRg9C90LrRhtC40Y8s0YfRgtC+0LHRiyDQv9GA0LjQvdC40LzQsNC70LAg0LLQtdGA0L3Ri9C5IHRoaXMuINCi0LDQuiDQttC1INC80L7QttC90L4g0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINC80LXRgtC+0LQgYmluZCgpKi9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfYWRkTGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9wdXRMaWtlcyh0aGlzLl91cmwsIHRoaXMuX2lkKS50aGVuKChyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdidXR0b24tbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5jYXJkQ291bnRMaWtlLnRleHRDb250ZW50ID0gci5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgfSkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVtb3ZlTGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9kZWxldGVMaWtlcyh0aGlzLl91cmwsIHRoaXMuX2lkKS50aGVuKChyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b24tbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5jYXJkQ291bnRMaWtlLnRleHRDb250ZW50ID0gci5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgfSkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlTWV0aG9kQ2FyZCh0aGlzLl91cmwsIHRoaXMuX2lkKS50aGVuKChyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX25ld0NhcmQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX25ld0NhcmQgPSBudWxsO1xyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgIH1cclxuXHJcbiAgICAvKtCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LzRiyovXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGAke3RoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yfWApKTtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcn1gKTtcclxuICAgICAgICAvLyDRh9GC0L7QsdGLINC/0YDQvtCy0LXRgNC40YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4INCyINGB0LDQvNC+0Lwg0L3QsNGH0LDQu9C1XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIC8vINGH0YLQvtCx0Ysg0L/RgNC+0LLQtdGA0Y/RgtGMINC10LPQviDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC70Y7QsdC+0LPQviDQuNC3INC/0L7Qu9C10LlcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke3RoaXMuX2NvbmZpZy5lcnJvckNsYXNzfV8ke2lucHV0RWxlbWVudC5pZH1gKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5fY29uZmlnLmVycm9yQ2xhc3N9X2FjdGl2ZWApO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLl9jb25maWcuZXJyb3JDbGFzc31fJHtpbnB1dEVsZW1lbnQuaWR9YCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYCR7dGhpcy5fY29uZmlnLmVycm9yQ2xhc3N9X2FjdGl2ZWApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXBlbmRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclBvcHVwKTtcclxuICAgICAgICB0aGlzLl9idXR0b25DbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tY2xvc2UnKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZWJpbmQgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlYmluZCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlYmluZCk7XHJcbiAgICB9XHJcbiAgICAvKtCX0LDQutGA0YvRgtC40LUgcG9wdXAg0LrQu9Cw0LLQuNGI0LXQuSBFc2MqL1xyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICAvKtCj0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsCDQutC90L7Qv9C60YMgQ2xvc2UqL1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvKtCj0YHRgtCw0L3QvtCy0LrQsCDRgdC70YPRiNCw0YLQtdC70Y8g0L3QsCBPdmVybGF5Ki9cclxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXAsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi1zdWJtaXQnKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5wdXQnKVxyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtVmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtVmFsdWVzXHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCksIGV2dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIC8vINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBgdmFsdWVgINC40L3Qv9GD0YLQsCDQtNCw0L3QvdGL0LUg0LjQtyDQvtCx0YrQtdC60YLQsCDQv9C+INCw0YLRgNC40LHRg9GC0YMgYG5hbWVgINGN0YLQvtCz0L4g0LjQvdC/0YPRgtCwXHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7LyrQntGH0LjRgdGC0LrQsCDRhNC+0YDQvNGLKi9cclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcydcclxuXHJcbmltcG9ydCB7IGJ1dHRvbkVkaXQsIGJ1dHRvbkFkZCwgY29uZmlnLCBmb3JtVmFsaWRhdG9ycywgYXZhdGFyLCBhcGlEYXRhIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJ1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnXHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcydcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnXHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnXHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaURhdGEpO1xyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fZWRpdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fYWRkJywgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfcGhvdG8nKTtcclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfZm9ybV9kZWxldGUnLCBoYW5kbGVEZWxldGVDYXJkU3VibWl0KTtcclxuY29uc3QgcG9wdXBVcGRhdGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2Zvcm1fdXBkYXRlQXZhdGFyJywgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IHVzZXJEYXRhID0gbmV3IFVzZXJJbmZvKCcucHJvZmlsZV9fbmFtZScsICcucHJvZmlsZV9fc3RhdHVzJywgJy5wcm9maWxlX19hdmF0YXInKTtcclxuXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtKSlcclxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudClcclxuICAgICAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQuNC3INCw0YLRgNC40LHRg9GC0LAgYG5hbWVgINGDINGE0L7RgNC80YtcclxuICAgICAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpXHJcblxyXG4gICAgICAgIC8vINCy0L7RgiDRgtGD0YIg0LIg0L7QsdGK0LXQutGCINC30LDQv9C40YHRi9Cy0LDQtdC8INC/0L7QtCDQuNC80LXQvdC10Lwg0YTQvtGA0LzRi1xyXG4gICAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgICAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcblxyXG4vL9Cf0LXRgNCy0L7QvdCw0YfQsNC70YzQvdCw0Y8g0LfQsNCz0YDRg9C30LrQsCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0YEg0YHQtdGA0LLQtdGA0LBcclxuYXBpLmdldERhdGEoYXBpRGF0YS51cmxEYXRhUHJvZmlsZSkudGhlbihpdGVtcyA9PiB7XHJcbiAgICB1c2VyRGF0YS5zYXZlU2VydmVySW5mb3JtYXRpb24oaXRlbXMpO1xyXG4gICAgdXNlckRhdGEuc2V0VXNlckluZm8oaXRlbXMubmFtZSwgaXRlbXMuYWJvdXQpO1xyXG4gICAgdXNlckRhdGEuc2V0VXNlckF2YXRhcihpdGVtcy5hdmF0YXIpO1xyXG59KS5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XHJcblxyXG4vL9Cf0L7Qu9GD0YfQtdC90LjQtSDQtNCw0L3QvdGL0YUg0LTQu9GPINC/0LXRgNCy0YvRhSDQutCw0YDRgtC+0YfQtdC6IGMg0YHQtdGA0LLQtdGA0LBcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZE9uU2VydmVyKCkge1xyXG4gICAgYXBpLmdldERhdGEoYXBpRGF0YS51cmxDYXJkKS50aGVuKGl0ZW1zID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICAgICAgICAgICAgaXRlbXM6IGl0ZW1zLCAvKtCf0LXRgNC10LTQsNGOINC80LDRgdGB0LjQsiDQvtCx0YrQtdC60YLQvtCyLCDQv9C+0LvRg9GH0LXQvdC90YvQuSDRgSDRgdC10YDQstC10YDQsCovXHJcbiAgICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAnLmNhcmRzJyk7XHJcbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoKTsgLyrQstGL0LfQvtCyINGA0LXQvdC00LXRgNCwINC90LDRh9Cw0LvRjNC90YvRhSDQutCw0YDRgtC+0YfQtdC6Ki9cclxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcclxufVxyXG5cclxuLyrQodC+0LfQtNCw0L3QuNC1INC90L7QstGL0YUg0LrQsNGA0YLQvtGH0LXQuiovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQob2JqKSB7XHJcbiAgICAvL9Cn0YLQvtCx0Ysg0L/RgNC4INC/0LXRgNC10LTQsNGH0LUg0LzQtdGC0L7QtNCwINC90LUg0YLQtdGA0Y/Qu9GB0Y8g0LrQvtC90YLQtdC60YHRgiB0aGlzINC80LXRgtC+0LTRiyDQt9Cw0L/QuNGB0LDQvdGLINC60LDQuiDRgdGC0YDQtdC70L7Rh9C90YvQtSDRhNGD0L3QutGG0LjQuFxyXG4gICAgY29uc3QgY2FyZE5ldyA9IG5ldyBDYXJkKG9iaiwgJy50ZW1wbGF0ZV9fY2FyZCcsIGFwaURhdGEudXJsQ2FyZCwgaGFuZGxlQ2FyZENsaWNrLCBhcGkuZGVsZXRlQ2FyZCwgYXBpLmRlbGV0ZUxpa2VzLCBhcGkucHV0TGlrZXMsIHBvcHVwRGVsZXRlLm9wZW4uYmluZChwb3B1cERlbGV0ZSksIHVzZXJEYXRhLmdldEZ1bGxQYWNrSW5mb09iaik7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmROZXcuY3JlYXRlQ2FyZCgpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50XHJcbn1cclxuXHJcbmNyZWF0ZUNhcmRPblNlcnZlcigpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIHVybCkge1xyXG4gICAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIHVybCk7XHJcbn1cclxuXHJcbi8q0KHQvtGF0YDQsNC90LXQvdC40LUg0Lgg0L7RgtGB0YvQu9C60LAg0LTQsNC90L3Ri9GFINGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQvdCwINGB0LXRgNCy0LXRgCovXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KG9iaiwgYnV0dG9uU3VibWl0KSB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIGJ1dHRvblN1Ym1pdCk7XHJcbiAgICBhcGkuc2VuZERhdGEoYXBpRGF0YS51cmxEYXRhUHJvZmlsZSwgb2JqKS50aGVuKG9iaiA9PiB7XHJcbiAgICAgICAgdXNlckRhdGEuc2V0VXNlckluZm8ob2JqLm5hbWUsIG9iai5hYm91dCk7XHJcbiAgICAgICAgcG9wdXBFZGl0LmNsb3NlKCk7XHJcbiAgICB9KS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xyXG4gICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgYnV0dG9uU3VibWl0KTtcclxufVxyXG5cclxuLyrQodC+0YXRgNCw0L3QtdC90LjQtSDQuCDQvtGC0YHRi9C70LrQsCDQtNCw0L3QvdGL0YUg0L3QsCDRgdC10YDQstC10YAsINCwINGC0LDQuiDQttC1INC/0L7RgdC70LXQtNGD0Y7RidC10LUg0LTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4Ki9cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQob2JqLCBidXR0b25TdWJtaXQpIHtcclxuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYnV0dG9uU3VibWl0KTtcclxuICAgIGFwaS5wb3N0Q2FyZChhcGlEYXRhLnVybENhcmQsIG9iaikudGhlbihvYmogPT4ge1xyXG4gICAgICAgIGNyZWF0ZUNhcmRPblNlcnZlcigpO1xyXG4gICAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgICB9KS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xyXG4gICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgYnV0dG9uU3VibWl0KTtcclxufVxyXG4vKtCj0LTQsNC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCDRgtC+0LvRjNC60L4g0L/QvtGB0LvQtSDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyovXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQoZGVsZXRlQ2FyZCkge1xyXG4gICAgZGVsZXRlQ2FyZCgpO1xyXG59XHJcblxyXG4vKtCh0L7RhdGA0LDQvdC10L3QuNC1INC00LDQvdC90YvRhSDQuCDQv9C+0YHQu9C10LTRg9GO0YnQsNGPINC30LDQvNC10L3QsCDQsNCy0LDRgtCw0YDQsCovXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQob2JqLCBidXR0b25TdWJtaXQpIHtcclxuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYnV0dG9uU3VibWl0KTtcclxuICAgIGFwaS5zZW5kRGF0YShhcGlEYXRhLnVybEF2YXRhciwgb2JqKS50aGVuKG9iaiA9PiB7XHJcbiAgICAgICAgdXNlckRhdGEuc2V0VXNlckF2YXRhcihvYmouYXZhdGFyKTtcclxuICAgICAgICBwb3B1cFVwZGF0ZUF2YXRhci5jbG9zZSgpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGJ1dHRvblN1Ym1pdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBidXR0b25TdWJtaXQpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgICBidXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAnQ9C+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJ1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICdD0L7RhdGA0LDQvdC40YLRjCc7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8q0J3QsNCy0LXRiNC40LLQsNC90LjQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0YHQvtCx0YvRgtC40Lkg0L3QsCDQutC90L7Qv9C60LggZWRpdCwgYWRkINC4INCw0LLQsNGC0LDRgCovXHJcbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBwb3B1cEVkaXQub3BlbigpO1xyXG4gICAgcG9wdXBFZGl0LnNldElucHV0VmFsdWVzKHVzZXJEYXRhLmdldFVzZXJJbmZvKCkpO1xyXG59KTtcclxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbJ2Zvcm1DYXJkJ10ucmVzZXRWYWxpZGF0aW9uKCk7IC8q0JLRi9Cx0LjRgNCw0Y4g0L3Rg9C20L3Rg9GOINC80L3QtSDRhNC+0YDQvNGDINC00LvRjyB2YWxpZCovXHJcbiAgICBwb3B1cEFkZC5vcGVuKCk7XHJcbn0pO1xyXG5hdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBwb3B1cFVwZGF0ZUF2YXRhci5vcGVuKCk7XHJcbn0pIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaGVhZGVycyB9KSB7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YSh1cmwpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KS50aGVuKChyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci5qc29uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0LTQsNC90L3Ri9GFICR7ci5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHNlbmREYXRhKHVybCwgb2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqKSxcclxuICAgICAgICB9KS50aGVuKHIgPT4gci5vayA/IHIuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCDQvtGC0L/RgNCw0LLQutC4INC00LDQvdC90YvRhSAke3Iuc3RhdHVzfSAke3Iuc3RhdHVzVGV4dH1gKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdENhcmQgPSAodXJsLCBvYmopID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9iaiksXHJcbiAgICAgICAgfSkudGhlbihyID0+IHIub2sgPyByLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGDQndC10LLQvtC30LzQvtC20L3QviDQtNC+0LHQsNCy0LjRgtGMINC60LDRgNGC0L7Rh9C60YMgJHtyLnN0YXR1c30gJHtyLnN0YXR1c1RleHR9YCkpO1xyXG4gICAgfVxyXG4gICAgLy/QktGL0LLQvtC0INGE0YPQvdC60YbQuNC4INGH0LXRgNC10Lcg0YHRgtGA0LXQu9C+0YfQvdGD0Y4g0YfRgtC+0LHRiyDQv9GA0Lgg0L/QtdGA0LXQtNCw0YfQtSDQtNCw0L3QvdC+0LPQviDQvNC10YLQvtC00LAg0LIg0LTRgNGD0LPQvtC5INC60LvQsNGB0YEg0L3QtSDRgtC10YDRj9C70YHRjyDQutC+0L3RgtC10LrRgdGCIHRoaXNcclxuICAgIC8v0KLQsNC6INC20LUg0LLQvtC30LzQvtC20LXQvSDQstCw0YDQuNCw0L3RgiDQutC+0LPQtNCwINC/0YDQuCDQv9C10YDQtdC00LDRh9C1INC80LXRgtC+0LTQsCDQvtC00L3QvtCz0L4g0LrQu9Cw0YHRgdCwINCyINC00YDRg9Cz0L7QuSDQutC70LDRgdGBXHJcbiAgICAvL9CX0LDQutGA0LXQv9C70Y/RgtGMIHRoaXMg0LzQtdGC0L7QtNC+0LwgYmluZCgpXHJcbiAgICBkZWxldGVDYXJkID0gKHVybCwgaWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dXJsfSR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbihyID0+IHIub2sgPyByLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGDQndC10LLQvtC30LzQvtC20L3QviDRg9C00LDQu9C40YLRjCDQutCw0YDRgtC+0YfQutGDJyAke3Iuc3RhdHVzfSAke3Iuc3RhdHVzVGV4dH1gKSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2VzID0gKHVybCwgaWQpID0+IHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dXJsfSR7aWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbihyID0+IHIub2sgPyByLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAg0YPQtNCw0LvQtdC90LjRjyDQu9Cw0LnQutCwJyAke3Iuc3RhdHVzfSAke3Iuc3RhdHVzVGV4dH1gKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHV0TGlrZXMgPSAodXJsLCBpZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt1cmx9JHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pLnRoZW4ociA9PiByLm9rID8gci5qc29uKCkgOiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwINGD0YHRgtCw0L3QvtCy0LrQuCDQu9Cw0LnQutCwICR7ci5zdGF0dXN9ICR7ci5zdGF0dXNUZXh0fWApKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcclxuICAgICAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcclxuICAgICAgICB0aGlzLl9wb3B1cEJpZ1Bob3RvID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19iaWdQaG90bycpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG9TdWJ0aXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VidGl0bGUnKTtcclxuICAgIH1cclxuICAgIC8q0KPQstC10LvQuNGH0LXQvdC40LUg0YTQvtGC0L4qL1xyXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBCaWdQaG90by5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQmlnUGhvdG8uc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9wb3B1cFBob3RvU3VidGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvclBvcHVwLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQodGhpcy5kZWxldGVDYXJkKTtcclxuICAgICAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGVsZXRlQ2FyZCkge1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKVxyXG4gICAgICAgIHRoaXMuZGVsZXRlQ2FyZCA9IGRlbGV0ZUNhcmQ7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIHN0YXR1c1NlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN0YXR1c1NlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gICAgICAgIHRoaXMuX2Fib3V0ID0gdGhpcy5fcHJvZmlsZVN0YXR1cy50ZXh0Q29udGVudDtcclxuXHJcbiAgICAgICAgdGhpcy5pbmZvID0ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxyXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fYWJvdXRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5pbmZvXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RnVsbFBhY2tJbmZvT2JqID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5mb3JtYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVNlcnZlckluZm9ybWF0aW9uKHVzZXJJbmZvcm1hdGlvbikge1xyXG4gICAgICAgIHRoaXMuX3VzZXJJbmZvcm1hdGlvbiA9IHVzZXJJbmZvcm1hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhpbnB1dE5hbWUsIGlucHV0U3RhdHVzKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWU7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZVN0YXR1cy50ZXh0Q29udGVudCA9IGlucHV0U3RhdHVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJBdmF0YXIoYXZhdGFyTGluaykge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyTGluaztcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9uRWRpdCIsImJ1dHRvbkFkZCIsImF2YXRhciIsImFwaURhdGEiLCJ1cmxEYXRhUHJvZmlsZSIsInVybENhcmQiLCJ1cmxBdmF0YXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImZvcm1WYWxpZGF0b3JzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwib2JqIiwiY2FyZFNlbGVjdG9yIiwidXJsRm9yQXBpIiwiaGFuZGxlQ2FyZENsaWNrIiwiZGVsZXRlTWV0aG9kQ2FyZCIsImRlbGV0ZUxpa2VzIiwicHV0TGlrZXMiLCJwb3B1cERlbGV0ZSIsImZ1bGxQYWNrSW5mb09iaiIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfY2FyZFNlbGVjdG9yIiwiX3VybCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZGVsZXRlTWV0aG9kQ2FyZCIsIl9kZWxldGVMaWtlcyIsIl9wdXRMaWtlcyIsIl9wb3B1cERlbGV0ZSIsIl9teUlkIiwiX215TmFtZSIsImNyZWF0ZUNhcmQiLCJfbmV3Q2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfYnV0dG9uRGVsZXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGl0bGVDYXJkIiwiYnV0dG9uTGlrZSIsInBob3RvTGlua0NhcmQiLCJjYXJkQ291bnRMaWtlIiwiaSIsImxlbmd0aCIsIl9zZXRFdmVudExpc3RlbmVycyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX3JlbW92ZUxpa2UiLCJfYWRkTGlrZSIsIl9kZWxldGVDYXJkIiwiYmluZCIsInRoZW4iLCJyIiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfY29uZmlnIiwiX2Zvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJlcnJvckNsYXNzIiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJyZXNldFZhbGlkYXRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kSXRlbSIsInByZXBlbmQiLCJjbGVhciIsImlubmVySFRNTCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsIlBvcHVwIiwic2VsZWN0b3JQb3B1cCIsIl9wb3B1cCIsIl9idXR0b25DbG9zZSIsIl9oYW5kbGVFc2NDbG9zZWJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9idXR0b25TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0Iiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwicmVzZXQiLCJhcGkiLCJ1cmwiLCJmZXRjaCIsIm1ldGhvZCIsIl9oZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImdldERhdGEiLCJzZW5kRGF0YSIsInBvcHVwRWRpdCIsImJ1dHRvblN1Ym1pdCIsInJlbmRlckxvYWRpbmciLCJ1c2VyRGF0YSIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJwb3B1cEFkZCIsInBvc3RDYXJkIiwiY3JlYXRlQ2FyZE9uU2VydmVyIiwicG9wdXBJbWFnZSIsIl9wb3B1cEJpZ1Bob3RvIiwiX3BvcHVwUGhvdG9TdWJ0aXRsZSIsImRlbGV0ZUNhcmQiLCJwb3B1cFVwZGF0ZUF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJuYW1lU2VsZWN0b3IiLCJzdGF0dXNTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3VzZXJJbmZvcm1hdGlvbiIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlU3RhdHVzIiwiX3Byb2ZpbGVBdmF0YXIiLCJnZXRVc2VySW5mbyIsIl9hYm91dCIsImluZm8iLCJzYXZlU2VydmVySW5mb3JtYXRpb24iLCJ1c2VySW5mb3JtYXRpb24iLCJpbnB1dE5hbWUiLCJpbnB1dFN0YXR1cyIsImF2YXRhckxpbmsiLCJjYXJkTGlzdCIsImNhcmRFbGVtZW50IiwiZ2V0RnVsbFBhY2tJbmZvT2JqIiwibG9nIiwiaXNMb2FkaW5nIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=